{"version":3,"sources":["redux/users-reducer.ts","common/Preloader/Preloader.tsx","components/Profile/RightColumn/Posts/Post/Post.tsx","components/ComingSoon/Settings/Settings.module.css","assets/images/userAvatar.jpg","API/chat-api.ts","redux/chat-reducer.ts","components/NavBar/NavBar.tsx","components/ComingSoon/Music/Music.tsx","components/ComingSoon/News/News.tsx","components/ComingSoon/Settings/Settings.tsx","components/Dialogs/RightDialogMenu/RightDialogMenu.tsx","components/ComingSoon/Communities/Communities.tsx","components/ComingSoon/Photos/Photos.tsx","components/ComingSoon/Videos/Videos.tsx","components/Dialogs/Messages/SentMessage.tsx","components/Dialogs/Messages/ReceivedMessage.tsx","components/Dialogs/Headers/ChatHeader.tsx","components/Dialogs/Chat.tsx","components/Dialogs/ChatContainer.tsx","components/Header/Header.tsx","redux/auth-reducer.ts","components/Header/HeaderContainer.tsx","components/Login/Login.tsx","redux/app-reducer.ts","hoc/WithSuspense.tsx","App.tsx","reportWebVitals.ts","redux/redux-store.ts","index.tsx","API/api.ts","customHookCSS/useClasses.ts","redux/dialogs-reducer.ts","utils/validators/validators.ts","redux/profile-reducer.ts"],"names":["initialState","users","pageSize","totalUsersCount","currentPage","isFriends","isFetching","followingInProgress","usersReducer","state","action","type","map","u","id","userId","followed","page","totalCount","isProgress","filter","followSuccess","unfollowSuccess","setUsers","setCurrentPage","setUserCountPerPage","toggleIsFetching","toggleFollowingProgress","toggleAllUsersOrFriends","requestUsers","dispatch","a","usersAPI","getUsers","response","items","followUnfollowFlow","apiMethod","actionCreator","data","resultCode","follow","bind","unfollow","Preloader","sx","position","top","left","checkOneDigitNumbers","i","monthNames","currentTime","today","Date","h","getHours","m","getMinutes","day","getDate","month","getMonth","styles","theme","userName","padding","margin","postTime","display","fontSize","color","alignItems","RootPostContainer","styled","Grid","Post","React","memo","props","classes","useClasses","useDispatch","container","item","spacing","direction","alt","src","photos","large","defaultUserAvatar","width","height","style","className","paddingTop","paddingRight","marginLeft","visibility","onClick","deletePost","wordWrap","message","likeCount","isLiked","size","setDislike","right","setLike","module","exports","subcribers","ws","closeHandler","notifySubscribersAboutStatus","setTimeout","createChannel","messageHandler","e","newMessages","JSON","parse","forEach","s","openHandler","errorHandler","console","error","cleanUp","removeEventListener","status","close","WebSocket","addEventListener","chatAPI","eventName","callback","push","send","messages","actions","payload","_newMessageHandler","newMessageHandlerCreator","_statusChangedHandler","statusChangedHandlerCreator","startMessagesListening","stopMessagesListening","sendMessage","chatReducer","v1","index","array","length","navLink","textDecoration","NavBar","selectedIndex","setSelectedIndex","handleListItemClick","event","to","ListItemButton","selected","StyledListItemIcon","ListItemText","primary","Divider","ListItemIcon","Music","xs","Paper","elevation","paper","marginTop","flexDirection","root","backgroundColor","button","Root","breakpoints","down","palette","secondary","main","up","green","News","flexWrap","TextField","Button","variant","Settings","settingsWrap","settingListMenu","href","settingMenu","CustomListItem","ListItem","rightDialogMenu","RightDialogMenu","useState","open","setClose","lg","wrap","List","disablePadding","exact","secondaryAction","IconButton","aria-label","edge","Delete","Communities","Photos","Videos","SentMessage","SentMessageContainer","editMode","setEditMode","newMessageText","setNewMessageText","setSelectedMessages","label","fullWidth","onChange","currentTarget","value","onBlur","EditMessageAC","autoFocus","isEdit","ReceivedMessageContainer","ReceivedMessage","ChatHeader","history","useHistory","justifyContent","paddingLeft","paddingBottom","Typography","selectedMessageCount","startIcon","goBack","deleteMessages","Avatar","Chat","messageArea","useRef","messagesEndRef","openAlert","setOpenAlert","selectedMessages","useEffect","current","scrollIntoView","behavior","dialogsPage","handleSelectMessage","messID","includes","messagesElements","md","RootContainer","x","MessagesArea","ref","InputArea","AddMessageFormRedux","onSubmit","values","newMessageBody","Snackbar","autoHideDuration","bottom","onClose","Alert","severity","overflow","overflowY","background","borderRadius","renderTextField","input","meta","touched","invalid","custom","helperText","multiline","maxRows","autoComplete","marginRight","maxLength100","maxLengthCreator","reduxForm","form","handleSubmit","Field","component","name","validate","requiredField","endIcon","Send","ChatContainer","connect","dialogPage","newMessText","sendMessageCreator","selectedMess","DeleteMessagesCreator","MainHeaderContainer","Header","isAuth","useSelector","auth","anchorEl","setAnchorEl","mobileMoreAnchorEl","setMobileMoreAnchorEl","setState","toggleDrawer","isMobileMenuOpen","Boolean","handleProfileMenuOpen","handleClose","renderMenu","Menu","PaperProps","mt","ml","mr","content","bgcolor","transform","zIndex","transformOrigin","horizontal","vertical","anchorOrigin","MenuItem","login","logout","Logout","mobileMenuId","renderMobileMenu","keepMounted","Badge","badgeContent","aria-controls","aria-haspopup","Box","flexGrow","AppBar","boxSizing","sm","xl","Drawer","anchor","role","onKeyDown","noWrap","email","setAuthUserData","getAuthUserData","authAPI","me","HeaderContainer","this","renderCheckbox","FormControlLabel","control","Checkbox","checked","LoginReduxForm","Chip","icon","password","rememberMe","stopSubmit","_error","RootContentContainer","LogInInfoContainer","fontWeight","LogInFormContainer","formData","initialized","withSuspense","WrappedComponent","Suspense","fallback","DialogsContainer","lazy","ProfileContainer","UsersContainer","lightTheme","createTheme","mode","darkTheme","MainContentContainer","marginBottom","rootContainer","gap","between","navigationContainer","only","SuspendedDialogs","SuspendedProfile","SuspendedUsers","SuspendedChat","App","log","isDarkMode","setDarkMode","app","promise","Promise","all","ThemeProvider","CssBaseline","path","render","ModeButton","Tooltip","title","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","rootReducers","combineReducers","profilePage","profileReducer","dialogsReducer","usersPage","formReducer","chat","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunkMiddleWare","axios","defaults","headers","common","ReactDOM","StrictMode","document","getElementById","instance","create","withCredentials","baseURL","get","post","delete","profileAPI","getProfile","getStatus","updateStatus","put","stylesElement","useTheme","useMemo","rawClasses","prepared","Object","entries","key","css","dialogs","newMess","d","dialogID","DeleteDialogCreator","maxLength","posts","profile","aboutMe","contacts","facebook","website","vk","twitter","instagram","youtube","github","mainLink","lookingForAJob","lookingForAJobDescription","fullName","small","newPost","newPostText","p","postID","addPostActionCreator","DeletePostCreator","setStatus","getUserProfile"],"mappings":"2iBA+BMA,EAAe,CACjBC,MAAO,GACPC,SAAU,EACVC,gBAAiB,EACjBC,YAAa,EACbC,WAAW,EACXC,YAAY,EACZC,oBAAqB,IAIZC,EAAe,WAAoF,IAAnFC,EAAkF,uDAAxDT,EAAcU,EAA0C,uCAC3G,OAAQA,EAAOC,MACX,IAAK,SACD,OAAO,2BAAIF,GAAX,IAAkBR,MAAM,YAAKQ,EAAMR,MAAMW,KAAI,SAAAC,GAAC,OAAIA,EAAEC,KAAOJ,EAAOK,OAAhB,2BAA6BF,GAA7B,IAAgCG,UAAU,IAAQH,QACxG,IAAK,WACD,OAAO,2BAAIJ,GAAX,IAAkBR,MAAM,YAAKQ,EAAMR,MAAMW,KAAI,SAAAC,GAAC,OAAIA,EAAEC,KAAOJ,EAAOK,OAAhB,2BAA6BF,GAA7B,IAAgCG,UAAU,IAASH,QACzG,IAAK,YACD,OAAO,2BAAIJ,GAAX,IAAkBR,MAAM,YAAKS,EAAOT,SACxC,IAAK,mBACD,OAAO,2BAAIQ,GAAX,IAAkBL,YAAaM,EAAOO,OAC1C,IAAK,0BACD,OAAO,2BAAIR,GAAX,IAAkBP,SAAUQ,EAAOR,WACvC,IAAK,uBACD,OAAO,2BAAIO,GAAX,IAAkBN,gBAAiBO,EAAOQ,aAC9C,IAAK,qBACD,OAAO,2BAAIT,GAAX,IAAkBH,WAAYI,EAAOJ,aACzC,IAAK,+BACD,OAAO,2BACAG,GADP,IACcF,oBAAqBG,EAAOS,WAAP,sBACrBV,EAAMF,qBADe,CACMG,EAAOK,SACtC,CAACN,EAAMF,oBAAoBa,QAAO,SAAAN,GAAE,OAAIA,IAAOJ,EAAOK,aAEpE,IAAK,8BACD,OAAO,2BAAIN,GAAX,IAAkBJ,UAAWK,EAAOL,YACxC,QACI,OAAOI,IAgBNY,EAAgB,SAACN,GAC1B,MAAO,CACHJ,KAlFO,SAmFPI,WAKKO,EAAkB,SAACP,GAC5B,MAAO,CACHJ,KAzFS,WA0FTI,WAKKQ,EAAW,SAACtB,GACrB,MAAO,CACHU,KAhGU,YAiGVV,UAKKuB,EAAiB,SAACP,GAC3B,MAAO,CACHN,KAvGiB,mBAwGjBM,SAKKQ,EAAsB,SAACvB,GAChC,MAAO,CACHS,KA7GwB,0BA8GxBT,aAaKwB,EAAmB,SAACpB,GAC7B,MAAO,CACHK,KA5HmB,qBA6HnBL,eAKKqB,EAA0B,SAACR,EAAqBJ,GACzD,MAAO,CACHJ,KAnI6B,+BAoI7BQ,aAAYJ,WAKPa,EAA0B,SAACvB,GACpC,MAAO,CACHM,KA1I4B,8BA2I5BN,cAKKwB,EAAe,SAACZ,EAAcf,EAAkBG,GAAjC,8CAAwD,WAAOyB,GAAP,eAAAC,EAAA,6DAChFD,EAASJ,GAAiB,IAC1BI,EAASN,EAAeP,IACxBa,EAASL,EAAoBvB,IAC7B4B,EAASF,EAAwBvB,IAJ+C,SAK3D2B,IAASC,SAAShB,EAAMf,EAAUG,GALyB,OAK5E6B,EAL4E,OAMhFJ,EAASJ,GAAiB,IAC1BI,EAASP,EAASW,EAASC,QAC3BL,EAvCO,CACHnB,KAtHqB,uBAuHrBO,WAqCwBgB,EAAShB,aAR2C,4CAAxD,uDAWtBkB,EAAkB,uCAAG,WAAON,EAAoBf,EACpBsB,EACAC,GAFP,SAAAP,EAAA,6DAGvBD,EAASH,GAAwB,EAAMZ,IAHhB,SAIFsB,EAAUtB,GAJR,OAKU,IALV,OAKVwB,KAAKC,YACdV,EAASQ,EAAcvB,IAE3Be,EAASH,GAAwB,EAAOZ,IARjB,2CAAH,4DAWX0B,EAAS,SAAC1B,GAAD,8CAAoB,WAAOe,GAAP,SAAAC,EAAA,sEAChCK,EAAmBN,EAAUf,EAAQiB,IAASS,OAAOC,KAAKV,KAAWX,GADrC,2CAApB,uDAITsB,EAAW,SAAC5B,GAAD,8CAAoB,WAAOe,GAAP,SAAAC,EAAA,sEAClCK,EAAmBN,EAAUf,EAAQiB,IAASW,SAASD,KAAKV,KAAWV,GADrC,2CAApB,wD,iCCrLxB,kCAYesB,IATf,WAEI,OACI,cAAC,IAAD,CAAKC,GAAI,CAACC,SAAU,WAAYC,IAAK,MAAOC,KAAK,OAAjD,SACI,cAAC,IAAD,Q,kPCOZ,SAASC,EAAqBC,GAI1B,OAHIA,EAAI,KACJA,EAAI,IAAMA,GAEPA,EAEX,IAAMC,EAAa,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MACnD,MAAO,MAAO,MAAO,MAAO,MAAO,OAE1BC,EAAc,WACvB,IAAIC,EAAQ,IAAIC,KACZC,EAAIF,EAAMG,WACVC,EAAIJ,EAAMK,aACVC,EAAMN,EAAMO,UACZC,EAAQV,EAAWE,EAAMS,YAM7B,OAHAL,EAAIR,EAAqBQ,GACzBF,EAAIN,EAAqBM,GAEnB,GAAN,OAAUI,EAAV,YAAiBE,EAAjB,YAA0BN,EAA1B,YAA+BE,IAG7BM,EAAS,SAACC,GAAD,MAAiB,CAC5BC,SAAU,CACNC,QAAS,EAAGC,OAAQ,iBAExBC,SAAU,CACND,OAAQ,EACRE,QAAS,OACTC,SAAU,OACVC,MAAO,UACPC,WAAY,YAKdC,EAAoBC,YAAOC,IAAPD,CAAH,0OAmBjBE,EAAOC,IAAMC,MAAK,SAACC,GAErB,IAAMC,EAAUC,YAAWlB,GACrBjC,EAAWoD,cAWjB,OACI,eAACT,EAAD,CAAmBU,WAAS,EAACC,MAAI,EAACC,QAAS,EAA3C,UAEI,eAAC,IAAD,CAAMF,WAAS,EAACC,MAAI,EAACC,QAAS,EAAGC,UAAW,MAAOd,WAAY,aAA/D,UACI,cAAC,IAAD,CAAMY,MAAI,EAAV,SACI,cAAC,IAAD,CACIG,IAAI,aACJC,IAAKT,EAAMU,OAAOC,MACZX,EAAMU,OAAOC,MACbC,IACN9C,GAAI,CAAC+C,MAAO,GAAIC,OAAQ,QAGhC,cAAC,IAAD,CAAMT,MAAI,EAAV,SACI,eAAC,IAAD,CAAMD,WAAS,EAACC,MAAI,EAACC,QAAS,EAAGC,UAAW,SAA5C,UACI,cAAC,IAAD,CAAMF,MAAI,EAACU,MAAO,CAAC5B,QAAS,EAAGC,OAAQ,GAAvC,SACI,oBAAI4B,UAAWf,EAAQf,SAAvB,SAAkCc,EAAMd,aAE5C,eAAC,IAAD,CAAMmB,MAAI,EAACW,UAAWf,EAAQZ,SAAU0B,MAAO,CAACE,WAAY,GAA5D,UACI,cAAC,IAAD,CAAoBF,MAAO,CAACF,MAAO,OAAQK,aAAc,SAAU7C,YAI/E,cAAC,IAAD,CAAMgC,MAAI,EAACU,MAAO,CAACI,WAAY,OAAQC,WAAW,UAAlD,SACI,cAAC,IAAD,CAAYL,MAAO,CAAC5B,QAAQ,GAA5B,SACI,cAAC,IAAD,CAAWkC,QA3BZ,kBAAMrB,EAAMsB,WAAWtB,EAAMjE,KA2BIyD,MAAO,YAAauB,MAAO,CAACI,WAAY,iBAIpF,cAAC,IAAD,CAAMd,MAAI,EAACU,MAAO,CAACQ,SAAU,aAAcN,WAAY,KAAvD,SACI,mBAAGF,MAAO,CAAC3B,OAAQ,GAAnB,SAAwBY,EAAMwB,YAElC,eAAC,IAAD,CAAMnB,MAAI,EAACU,MAAO,CAAC5B,QAAS,EAAGgC,WAAY,OAAQ7B,QAAS,QAA5D,UACKU,EAAMyB,UACLzB,EAAM0B,QAIF,cAAC,IAAD,CAAYC,KAAM,QAASN,QA5C1B,WACftE,EAAS6E,YAAW5B,EAAMjE,MA2CoCgF,MAAO,CAAC5B,QAAS,aAAjE,SACE,cAAC,IAAD,CAAc4B,MAAO,CAACvB,MAAO,MAAOzB,SAAU,WAAY8D,MAAO,OAJrE,cAAC,IAAD,CAAYF,KAAM,QAASN,QA5C3B,WACZtE,EAAS+E,YAAQ9B,EAAMjE,MA2CkCgF,MAAO,CAAC5B,QAAS,aAA9D,SACI,cAAC,IAAD,CAA4B4B,MAAO,CAACvB,MAAO,MAAOzB,SAAU,WAAY8D,MAAO,gBAWxFhC,O,oBClIfkC,EAAOC,QAAU,CAAC,aAAe,+BAA+B,gBAAkB,kCAAkC,YAAc,gC,iCCDnH,2lO,oLCATC,EAAa,CACf,oBAAqB,GACrB,iBAAkB,IAGlBC,EAAuB,KAGrBC,EAAe,WACjBC,EAA6B,WAC7BC,WAAWC,EAAe,MAExBC,EAAiB,SAACC,GACpB,IAAMC,EAAcC,KAAKC,MAAMH,EAAEhF,MACjCyE,EAAW,qBAAqBW,SAAQ,SAAAC,GAAC,OAAIA,EAAEJ,OAE7CK,EAAc,WAChBV,EAA6B,UAE3BW,EAAe,WACjBX,EAA6B,SAC7BY,QAAQC,MAAM,iBAEZC,EAAU,WAAO,IAAD,QAChB,QAAF,EAAAhB,SAAA,SAAIiB,oBAAoB,QAAShB,GAC/B,QAAF,EAAAD,SAAA,SAAIiB,oBAAoB,UAAWZ,GACjC,QAAF,EAAAL,SAAA,SAAIiB,oBAAoB,OAAQL,GAC9B,QAAF,EAAAZ,SAAA,SAAIiB,oBAAoB,QAASJ,IAE/BX,EAA+B,SAACgB,GAClCnB,EAAW,kBAAkBW,SAAQ,SAAAC,GAAC,OAAIA,EAAEO,OAGhD,SAASd,IAAiB,IAAD,EACrBY,IACE,QAAF,EAAAhB,SAAA,SAAImB,QACJnB,EAAK,IAAIoB,UAAU,gEACnBlB,EAA6B,WAC7BF,EAAGqB,iBAAiB,QAASpB,GAC7BD,EAAGqB,iBAAiB,UAAWhB,GAC/BL,EAAGqB,iBAAiB,OAAQT,GAC5BZ,EAAGqB,iBAAiB,QAASR,GAI1B,IAAMS,EAAU,WAEflB,KAFKkB,EAAU,WAIX,IAAD,EACHvB,EAAW,qBAAuB,GAClCA,EAAW,kBAAoB,GAC/BiB,IACE,QAAF,EAAAhB,SAAA,SAAImB,SARCG,EAAU,SAUTC,EAA4BC,GAGlC,OADAzB,EAAWwB,GAAWE,KAAKD,GACpB,WAEHzB,EAAWwB,GAAaxB,EAAWwB,GAAWpH,QAAO,SAAAwG,GAAC,OAAIA,IAAMa,OAf/DF,EAAU,SAkBPC,EAA4BC,GAEpCzB,EAAWwB,GAAaxB,EAAWwB,GAAWpH,QAAO,SAAAwG,GAAC,OAAIA,IAAMa,MApB3DF,EAAU,SAsBPhC,GAAkB,IAAD,EACvB,QAAF,EAAAU,SAAA,SAAI0B,KAAKpC,I,QC5DbvG,EAAe,CACf4I,SAAU,GACVT,OAAQ,WAqBCU,EACS,SAACD,GAAD,MAAqC,CACnDjI,KAAM,4BAA6BmI,QAAS,CAACF,cAFxCC,EAIM,SAACV,GAAD,MAAyB,CACpCxH,KAAM,yBAA0BmI,QAAS,CAACX,YAI9CY,EAAwE,KACtEC,EAA2B,SAAClH,GAM9B,OAL2B,OAAvBiH,IACAA,EAAqB,SAACH,GAClB9G,EAAS+G,EAAyBD,MAGnCG,GAGPE,EAA+D,KAC7DC,EAA8B,SAACpH,GAMjC,OAL8B,OAA1BmH,IACAA,EAAwB,SAACd,GACrBrG,EAAS+G,EAAsBV,MAGhCc,GAGEE,EAAyB,yDAAiB,WAAOrH,GAAP,SAAAC,EAAA,sDACnDwG,IACAA,EAAkB,oBAAqBS,EAAyBlH,IAChEyG,EAAkB,iBAAkBW,EAA4BpH,IAHb,2CAAjB,uDAMzBsH,EAAwB,yDAAiB,WAAOtH,GAAP,SAAAC,EAAA,sDAClDwG,EAAoB,oBAAqBS,EAAyBlH,IAClEyG,EAAoB,iBAAkBW,EAA4BpH,IAClEyG,IAHkD,2CAAjB,uDAMxBc,EAAc,SAAC9C,GAAD,8CAAgC,WAAOzE,GAAP,SAAAC,EAAA,sDACvDwG,EAAoBhC,GADmC,2CAAhC,uDAKZ+C,IAhEK,WAAkE,IAAjE7I,EAAgE,uDAAxDT,EAAcU,EAA0C,uCACjF,OAAQA,EAAOC,MACX,IAAK,4BACD,OAAO,2BACAF,GADP,IAEImI,SAAU,sBAAInI,EAAMmI,UAAV,YAAuBlI,EAAOoI,QAAQF,SAAShI,KAAK,SAAA6C,GAAC,kCAASA,GAAT,IAAY3C,GAAIyI,qBAC1EnI,QAAO,SAACqC,EAAG+F,EAAOC,GAAX,OAAqBD,GAASC,EAAMC,OAAS,SAEjE,IAAK,yBACD,OAAO,2BACAjJ,GADP,IAEI0H,OAAQzH,EAAOoI,QAAQX,SAE/B,QACI,OAAO1H,K,wbCRbsD,EAAS,SAACC,GAAD,MAAiB,CAC5B2F,QAAS,CACLC,eAAgB,OAAQrF,MAAO,aAKxB,SAASsF,IACpB,IAAM7E,EAAUC,YAAWlB,GADE,EAGac,WAAe,GAH5B,mBAGtBiF,EAHsB,KAGPC,EAHO,KAKvBC,EAAsB,SACxBC,EACAT,GAEAO,EAAiBP,IAIrB,OACI,qCACI,cAAC,IAAD,CAASU,GAAG,IAAInE,UAAWf,EAAQ2E,QAAnC,SACI,eAACQ,EAAA,EAAD,CACIC,SAA4B,IAAlBN,EACV1D,QAAS,SAAC6D,GAAD,OAAWD,EAAoBC,EAAO,IAFnD,UAII,cAACI,EAAD,UACI,cAAC,IAAD,MAEJ,cAACC,EAAA,EAAD,CAAcC,QAAQ,iBAG9B,cAAC,IAAD,CAASL,GAAG,WAAWnE,UAAWf,EAAQ2E,QAA1C,SACI,eAACQ,EAAA,EAAD,CACIC,SAA4B,IAAlBN,EACV1D,QAAS,SAAC6D,GAAD,OAAWD,EAAoBC,EAAO,IAFnD,UAII,cAACI,EAAD,UACI,cAAC,IAAD,MAEJ,cAACC,EAAA,EAAD,CAAcC,QAAQ,mBAG9B,cAAC,IAAD,CAASL,GAAG,SAASnE,UAAWf,EAAQ2E,QAAxC,SACI,eAACQ,EAAA,EAAD,CACIC,SAA4B,IAAlBN,EACV1D,QAAS,SAAC6D,GAAD,OAAWD,EAAoBC,EAAO,IAFnD,UAII,cAACI,EAAD,UACI,cAAC,IAAD,MAEJ,cAACC,EAAA,EAAD,CAAcC,QAAQ,eAG9B,cAACC,EAAA,EAAD,IACA,cAAC,IAAD,CAASN,GAAG,QAAQnE,UAAWf,EAAQ2E,QAAvC,SACI,eAACQ,EAAA,EAAD,CACIC,SAA4B,IAAlBN,EACV1D,QAAS,SAAC6D,GAAD,OAAWD,EAAoBC,EAAO,IAFnD,UAII,cAACI,EAAD,UACI,cAAC,IAAD,MAEJ,cAACC,EAAA,EAAD,CAAcC,QAAQ,cAG9B,cAACC,EAAA,EAAD,IACA,cAAC,IAAD,CAASN,GAAG,QAAQnE,UAAWf,EAAQ2E,QAAvC,SACI,eAACQ,EAAA,EAAD,CACIC,SAA4B,IAAlBN,EACV1D,QAAS,SAAC6D,GAAD,OAAWD,EAAoBC,EAAO,IAFnD,UAII,cAACI,EAAD,UACI,cAAC,IAAD,MAEJ,cAACC,EAAA,EAAD,CAAcC,QAAQ,cAG9B,cAAC,IAAD,CAASL,GAAG,SAASnE,UAAWf,EAAQ2E,QAAxC,SACI,eAACQ,EAAA,EAAD,CACIC,SAA4B,IAAlBN,EACV1D,QAAS,SAAC6D,GAAD,OAAWD,EAAoBC,EAAO,IAFnD,UAII,cAACI,EAAD,UACI,cAAC,IAAD,MAEJ,cAACC,EAAA,EAAD,CAAcC,QAAQ,eAG9B,cAAC,IAAD,CAASL,GAAG,eAAenE,UAAWf,EAAQ2E,QAA9C,SACI,eAACQ,EAAA,EAAD,CACIC,SAA4B,IAAlBN,EACV1D,QAAS,SAAC6D,GAAD,OAAWD,EAAoBC,EAAO,IAFnD,UAII,cAACI,EAAD,UACI,cAAC,IAAD,MAEJ,cAACC,EAAA,EAAD,CAAcC,QAAQ,qBAG9B,cAAC,IAAD,CAASL,GAAG,UAAUnE,UAAWf,EAAQ2E,QAAzC,SACI,eAACQ,EAAA,EAAD,CACIC,SAA4B,IAAlBN,EACV1D,QAAS,SAAC6D,GAAD,OAAWD,EAAoBC,EAAO,IAFnD,UAII,cAACI,EAAD,UACI,cAAC,IAAD,MAEJ,cAACC,EAAA,EAAD,CAAcC,QAAQ,gBAG9B,cAAC,IAAD,CAASL,GAAG,UAAUnE,UAAWf,EAAQ2E,QAAzC,SACI,eAACQ,EAAA,EAAD,CACIC,SAA4B,IAAlBN,EACV1D,QAAS,SAAC6D,GAAD,OAAWD,EAAoBC,EAAO,IAFnD,UAII,cAACI,EAAD,UACI,cAAC,IAAD,MAEJ,cAACC,EAAA,EAAD,CAAcC,QAAQ,gBAG9B,cAAC,IAAD,CAASL,GAAG,YAAYnE,UAAWf,EAAQ2E,QAA3C,SACI,eAACQ,EAAA,EAAD,CACIC,SAA4B,IAAlBN,EACV1D,QAAS,SAAC6D,GAAD,OAAWD,EAAoBC,EAAO,IAFnD,UAII,cAACI,EAAD,UACI,cAAC,IAAD,MAEJ,cAACC,EAAA,EAAD,CAAcC,QAAQ,qBAO1C,IAAMF,EAAqB3F,YAAO+F,IAAP/F,CAAH,mE,kBC3ITgG,MAbf,WACI,OACI,cAAC/F,EAAA,EAAD,CAAMS,MAAI,EAACuF,GAAI,GAAf,SACI,cAACC,EAAA,EAAD,CAAOC,UAAW,EAAlB,SACI,sBAAK/E,MAAO,CAACF,MAAO,OAAQC,OAAQ,QAApC,iCAEI,cAACjD,EAAA,EAAD,Y,2BCJdmB,GAAS,SAACC,GAAD,MAAiB,CAC5B8G,MAAO,CACHC,UAAW/G,EAAMqB,QAAQ,GACzBhB,QAAS,OACT2G,cAAe,SACfxG,WAAY,UAEhByG,KAAM,CACFC,gBAAiB,MACjB3G,MAAO,SAEX4G,OAAQ,KAINC,GAAO1G,YAAO,MAAPA,EAAc,kBAAEV,EAAF,EAAEA,MAAF,UACvBE,QAASF,EAAMqB,QAAQ,IADA,cAEtBrB,EAAMqH,YAAYC,KAAK,MAAQ,CAC5BJ,gBAAiBlH,EAAMuH,QAAQC,UAAUC,OAHtB,cAKtBzH,EAAMqH,YAAYK,GAAG,MAAQ,CAC1BR,gBAAiBlH,EAAMuH,QAAQhB,QAAQkB,OANpB,cAQtBzH,EAAMqH,YAAYK,GAAG,MAAQ,CAC1BR,gBAAiBS,KAAM,OATJ,KAgCZC,OAjBf,WAEI,IAAM5G,EAAUC,YAAWlB,IAC3B,OACI,cAACY,EAAA,EAAD,CAAMS,MAAI,EAACuF,GAAI,GAAf,SACI,cAACC,EAAA,EAAD,CAAOC,UAAW,EAAlB,SACI,cAACO,GAAD,CAAMtF,MAAO,CAACF,MAAO,OAAQC,OAAQ,QAArC,SACI,eAAClB,EAAA,EAAD,CAAMQ,WAAS,EAACY,UAAWf,EAAQiG,KAAM7F,MAAI,EAACE,UAAW,MAAOuG,SAAU,SAA1E,UACI,cAACC,EAAA,EAAD,IACA,cAACC,EAAA,EAAD,CAAQhG,UAAWf,EAAQmG,OAAQa,QAAS,YAAazH,MAAO,UAAhE,2B,6LCTT0H,OAvBf,WACI,OACI,cAACtH,EAAA,EAAD,CAAMS,MAAI,EAACuF,GAAI,GAAf,SACI,cAACC,EAAA,EAAD,CAAOC,UAAW,EAAlB,SACI,sBAAK9E,UAAW6B,KAAEsE,aAAlB,UACI,sBAAKnG,UAAW6B,KAAEuE,gBAAlB,UACI,oBAAGC,KAAK,KAAR,cAAc,cAAC,IAAD,CAAsBtG,MAAO,CAACG,aAAc,UAA1D,sBACA,oBAAGmG,KAAK,KAAR,cAAc,cAAC,KAAD,CAAsBtG,MAAO,CAACG,aAAc,UAA1D,aACA,oBAAGmG,KAAK,KAAR,cAAc,cAAC,KAAD,CAAkBtG,MAAO,CAACG,aAAc,UAAtD,sBACA,oBAAGmG,KAAK,KAAR,cAAc,cAAC,KAAD,CAAiCtG,MAAO,CAACG,aAAc,UAArE,oBACA,oBAAGmG,KAAK,KAAR,cAAc,cAAC,KAAD,CAAuBtG,MAAO,CAACG,aAAc,UAA3D,eACA,oBAAGmG,KAAK,KAAR,cAAc,cAAC,KAAD,CAAsBtG,MAAO,CAACG,aAAc,UAA1D,wBACA,oBAAGmG,KAAK,KAAR,cAAc,cAAC,KAAD,CAAyBtG,MAAO,CAACG,aAAc,UAA7D,aACA,oBAAGmG,KAAK,KAAR,cAAc,cAAC,KAAD,CAAmBtG,MAAO,CAACG,aAAc,UAAvD,cACA,oBAAGmG,KAAK,KAAR,cAAc,cAAC,KAAD,CAA0BtG,MAAO,CAACG,aAAc,UAA9D,2BAEJ,qBAAKF,UAAW6B,KAAEyE,YAAlB,mC,wECZdC,GAAiB5H,YAAO6H,KAAP7H,EAA4B,kBAAc,CAC7D,qCAAsC,CAClCyB,WAAY,UAEhB,UAAW,CACP,sBAAuB,CAAC5B,MALmB,EAAEP,MAKRuH,QAAQhB,QAAQkB,MACrD,mCAAoC,CAChCtF,WAAY,gBAIlBpC,GAAS,SAACC,GAAD,YAAiB,CAC5B2F,QAAS,CACLC,eAAgB,OAAQrF,MAAO,WAEnCiI,iBAAe,mBACVxI,EAAMqH,YAAYC,KAAK,MAAQ,CAC5BjH,QAAS,SAFF,cAIVL,EAAMqH,YAAYK,GAAG,MAAQ,CAC1BrH,QAAS,QACTuB,MAAM,UANC,KA0EJ6G,OA9Df,WAEI,IAAMzH,EAAUC,YAAWlB,IAFJ,EAImBc,IAAM6H,SAAS,GAJlC,mBAIhB5C,EAJgB,KAIDC,EAJC,OAKE2C,oBAAS,GALX,mBAKhBC,EALgB,KAKVC,EALU,KAOjB5C,EAAsB,SAACC,EAAqDT,GAC9EO,EAAiBP,IAIrB,OACI,cAAC7E,EAAA,EAAD,CAAMS,MAAI,EAACyH,GAAI,EAAG9G,UAAWf,EAAQwH,gBAArC,SACI,cAAC5B,EAAA,EAAD,CAAOC,UAAW,EAAlB,SACI,cAAClG,EAAA,EAAD,CAAMQ,WAAS,EAACC,MAAI,EAACE,UAAW,SAAUwH,KAAM,SAAhD,SACI,eAACC,GAAA,EAAD,WACI,cAAC,IAAD,CAAS7C,GAAG,WAAWnE,UAAWf,EAAQ2E,QAA1C,SACI,cAAC4C,GAAA,EAAD,CAAUS,gBAAc,EAAxB,SACI,eAAC7C,EAAA,EAAD,CAAgBC,SAA4B,IAAlBN,EACV1D,QAAS,SAAC6D,GAAD,OAAWD,EAAoBC,EAAO,IAD/D,UAEI,cAACQ,EAAA,EAAD,UACI,cAAC,KAAD,CAAmBlG,MAAO,cAE9B,cAAC+F,EAAA,EAAD,CAAcC,QAAQ,qBAIlC,cAACgC,GAAA,EAAD,CAAUS,gBAAc,EAAxB,SACI,eAAC7C,EAAA,EAAD,CAAgBC,SAA4B,IAAlBN,EACV1D,QAAS,SAAC6D,GAAD,OAAWD,EAAoBC,EAAO,IAD/D,UAEI,cAACQ,EAAA,EAAD,UACI,cAAC,KAAD,CAA6BlG,MAAO,cAExC,cAAC+F,EAAA,EAAD,CAAcC,QAAQ,gBAG7BoC,GAAQ,eAAC,IAAD,CAASM,OAAK,EAAC/C,GAAG,gBAAgBnE,UAAWf,EAAQ2E,QAArD,UACL,cAACa,EAAA,EAAD,IACA,cAAC8B,GAAD,CAAgBU,gBAAc,EACdE,gBACI,cAACC,EAAA,EAAD,CAAYC,aAAW,SAASC,KAAM,MAC1BjH,QAAS,kBAAMwG,GAAUD,IADrC,SAEI,cAACW,GAAA,EAAD,CAAQ/I,MAAO,YAAaD,SAAU,YAJ9D,SAQI,cAAC6F,EAAA,EAAD,CAAgBC,SAA4B,IAAlBN,EACV1D,QAAS,SAAC6D,GAAD,OAAWD,EAAoBC,EAAO,IAD/D,SAEI,cAACK,EAAA,EAAD,CAAcC,QAAQ,gCC/E3CgD,OAXf,WACI,OACI,cAAC5I,EAAA,EAAD,CAAMS,MAAI,EAACuF,GAAI,GAAf,SACI,cAACC,EAAA,EAAD,CAAOC,UAAW,EAAlB,SACI,qBAAK/E,MAAO,CAACF,MAAO,OAAQC,OAAQ,QAApC,6CCMD2H,OAVf,WACI,OACI,cAAC7I,EAAA,EAAD,CAAMS,MAAI,EAACuF,GAAI,GAAf,SACI,cAACC,EAAA,EAAD,CAAOC,UAAW,EAAlB,SACI,qBAAK/E,MAAO,CAACF,MAAO,OAAQC,OAAQ,QAApC,wCCMD4H,I,GAAAA,GAVf,WACI,OACI,cAAC9I,EAAA,EAAD,CAAMS,MAAI,EAACuF,GAAI,GAAf,SACI,cAACC,EAAA,EAAD,CAAOC,UAAW,EAAlB,SACI,qBAAK/E,MAAO,CAACF,MAAO,OAAQC,OAAQ,QAApC,wC,kGCmHD6H,I,GAAAA,GA5Gf,SAAqB3I,GAEjB,IAAM4I,EAAuBjJ,YAAOC,IAAPD,CAAH,8mCAiBZK,EAAM6I,SAAW,oBAAsB,oBAoBnC7I,EAAM6I,SAAW,UAAY,SAY9B7I,EAAM6I,SAAW,IAAM,OAUlC9L,EAAWoD,eA7D2C,EA8D5BwH,oBAAS,GA9DmB,mBA8DrDkB,EA9DqD,KA8D3CC,EA9D2C,OA+DhBnB,mBAAS3H,EAAMwB,SA/DC,mBA+DrDuH,EA/DqD,KA+DrCC,EA/DqC,KAkF5D,OACI,eAACJ,EAAD,CACsBvH,QAVJ,WAClBrB,EAAMiJ,oBAAoBjJ,EAAMjE,KAQhC,UAEI,cAAC,KAAD,CAAiByD,MAAO,aACtBqJ,GAAY,cAAC,KAAD,CAAkBrJ,MAAO,UAAW6B,QArBjC,WACrByH,GAAY,GACZE,EAAkBhJ,EAAMwB,YAqBlBqH,EAOI,cAAC9B,EAAA,EAAD,CAAWhL,GAAG,iBACHmN,MAAM,eACNjC,QAAQ,WACRkC,WAAS,EACTC,SArBD,SAAC5G,GACrBwG,EAAkBxG,EAAE6G,cAAcC,QAqBbA,MAAOP,EACPQ,OAhCA,WACrBT,GAAY,GACZ/L,EAASyM,aAAcxJ,EAAMjE,GAAIgN,KA+BZU,WAAS,IAbpB,8BAAIzJ,EAAMwB,QACR,gCACKnD,eACA2B,EAAM0J,QAAU,gBAW7B,qBAAKjJ,IAAI,4DAA4DD,IAAI,iBApBlDR,EAAMjE,K,8BC3FnC4N,GAA2BhK,YAAOC,IAAPD,CAAH,g0BA2DfiK,OAbf,WAEI,OACI,eAACD,GAAD,WACI,qBAAKlJ,IAAI,qDAAqDD,IAAI,eAClE,iPACI,8BAAMnC,oBAEV,cAAC,KAAD,CAAiBmB,MAAO,gB,wGCarBqK,OArDf,SAAoB7J,GAEhB,IAAI8J,EAAUC,cAEd,OACI,eAACnK,EAAA,EAAD,CAAMQ,WAAS,EAACC,MAAI,EAACE,UAAW,MAAOyJ,eAAgB,gBAAiBvK,WAAY,SAC9EqH,SAAU,SACV/F,MAAO,CAACkJ,YAAa,OAAQ/I,aAAc,OAAQgJ,cAAe,MAAOjJ,WAAY,OAF3F,UAGKjB,EAAM6I,SACD,eAACjJ,EAAA,EAAD,CAAMS,MAAI,EAACf,QAAS,OAAQ2G,cAAe,MAAOxG,WAAY,SAAUsB,MAAO,CAAC5B,QAAQ,OAAxF,UACE,cAACgL,GAAA,EAAD,CAAYlD,QAAS,YAArB,SAAkC,8BAAIjH,EAAMoK,qBAAV,iBAClC,cAAChC,EAAA,EAAD,UACI,cAAC,KAAD,CAAW/G,QAAS,kBAAMrB,EAAM8I,eAAevJ,SAAU,QAASC,MAAO,mBAG/E,yCAAG,cAACI,EAAA,EAAD,CAAMS,MAAI,EAAV,SACD,cAAC2G,EAAA,EAAD,CAAQC,QAAS,OAAQoD,UAAW,cAAC,KAAD,IAA0BhJ,QAAS,WACnEyI,EAAQQ,UADZ,oBAIA,cAAC1K,EAAA,EAAD,CAAMS,MAAI,EAAV,SACI,cAAC8J,GAAA,EAAD,CAAYlD,QAAS,KAArB,6BAIZ,cAACrH,EAAA,EAAD,CAAMS,MAAI,EAAV,SACKL,EAAM6I,SAAW,cAACjJ,EAAA,EAAD,CAAMS,MAAI,EAAV,SACV,cAAC2G,EAAA,EAAD,CAAQC,QAAS,YAAazH,MAAO,YAAa6B,QAASrB,EAAMuK,eAAgB5I,KAAM,QAAvF,sBAEJ,eAAC/B,EAAA,EAAD,CAAMQ,WAAS,EAACC,MAAI,EAACE,UAAW,MAAOyJ,eAAgB,gBAAiBvK,WAAY,SAApF,UACI,cAACG,EAAA,EAAD,CAAMS,MAAI,EAAV,SACI,cAAC+H,EAAA,EAAD,CAAYC,aAAW,SAAS7I,MAAM,UAAtC,SACI,cAAC,KAAD,QAGR,cAACI,EAAA,EAAD,CAAMS,MAAI,EAAV,SACI,cAAC+H,EAAA,EAAD,CAAYC,aAAW,SAAS7I,MAAM,UAAtC,SACI,cAAC,KAAD,QAGR,cAACI,EAAA,EAAD,CAAMS,MAAI,EAAV,SACI,cAACmK,GAAA,EAAD,CACIhK,IAAI,aACJC,IAAI,4DACJ3C,GAAI,CAAC+C,MAAO,GAAIC,OAAQ,iB,6BC0CzC2J,OA/Ff,SAAczK,GAEV,IAAM0K,EAAcC,iBAAuB,MACrCC,EAAiBD,iBAAuB,MAHX,EAKDhD,oBAAS,GALR,mBAK5BkD,EAL4B,KAKjBC,EALiB,OAManD,mBAAmB,IANhC,mBAM5BoD,EAN4B,KAMV9B,EANU,KAYnC+B,qBAHuB,WACnBJ,EAAeK,QAASC,eAAe,CAACC,SAAU,WAE5B,CAACnL,EAAMoL,YAAYvH,WAe7C,IAOMwH,EAAsB,SAACC,GACrBP,EAAiBQ,SAASD,GAC1BrC,EAAoB8B,EAAiB1O,QAAO,SAAAqC,GAAC,OAAIA,IAAM4M,MAEvDrC,EAAoB,GAAD,oBAAK8B,GAAL,CAAuBO,MAa9CE,EAAmBxL,EAAMoL,YAAYvH,SACpChI,KAAI,SAAA6C,GAAC,OAAI,cAAC,GAAD,CACa8C,QAAS9C,EAAE8C,QACXzF,GAAI2C,EAAE3C,GACN2N,OAAQhL,EAAEgL,OACVb,SAAUkC,EAAiBQ,SAAS7M,EAAE3C,IACtCkN,oBAAqBoC,GALhB3M,EAAE3C,OAUlC,OACI,cAAC6D,EAAA,EAAD,CAAMS,MAAI,EAACuF,GAAI,GAAI6F,GAAI,GAAI3D,GAAI,EAA/B,SACI,cAACjC,EAAA,EAAD,CAAOC,UAAW,EAAlB,SACI,eAAC4F,GAAD,CAAetL,WAAS,EAACC,MAAI,EAA7B,UACI,cAAC,GAAD,CACIwI,WAAYkC,EAAiBpG,OAC7BmE,YAtBI,WACpBG,EAAoB,KAsBJmB,qBAAsBW,EAAiBpG,OACvC4F,eA7BG,WACnBvK,EAAMuK,eAAevK,EAAMoL,YAAYvH,SAAShI,KAAI,SAAA6C,GAAC,OAAIA,EAAE3C,MAAIM,QAAO,SAAAsP,GAAC,OAAIZ,EAAiBQ,SAASI,OACrGb,GAAa,GACb7B,EAAoB,OA4BR,cAACxD,EAAA,EAAD,IACA,eAACmG,GAAD,CAAcC,IAAKnB,EAAnB,UACI,cAAC,GAAD,IACA,cAAC,GAAD,IACCc,EACD,qBAAKK,IAAKjB,OAEd,cAACnF,EAAA,EAAD,IACA,cAACqG,GAAD,CAAWzL,MAAI,EAAf,SACI,cAAC0L,GAAD,CAAqBC,SAtDnB,SAACC,GAChBA,EAAOC,iBACNlM,EAAMsE,YAAY2H,EAAOC,gBACzBD,EAAOC,eAAiB,SAqDhB,cAACC,GAAA,EAAD,CAAUvE,KAAMiD,EAAWuB,iBAAkB,IACnCrL,MAAO,CAAChD,SAAU,WAAYsO,OAAQ,GAAIpO,KAAM,IAAKqO,QAAS,kBAAMxB,GAAa,IAD3F,SAEI,cAACyB,GAAA,EAAD,CAAOC,SAAS,UAAhB,6CAalBZ,GAAejM,YAAO,MAAPA,EAAc,cAAEV,MAAF,MAAc,CAC7CK,QAAS,OACT2G,cAAe,SACfnF,OAAQ,OAER2L,SAAU,OACVC,UAAW,UACX,uBAAwB,CACpB7L,MAAO,OAEX,6BAA8B,CAC1B8L,WAAY,UACZC,aAAc,OAElB,OAAQ,CACJxN,OAAQ,EACRD,QAAS,wBAGXuM,GAAgB/L,YAAOC,IAAPD,CAAa,CAC/BmB,OAAQ,QACRmF,cAAe,SACfa,SAAU,WAERgF,GAAYnM,YAAOC,IAAPD,CAAa,CAC3BR,QAAS,sBACTG,QAAS,OACT2G,cAAe,MACfa,SAAU,WAKR+F,GAAkB,SAAC,GAAD,EAAE3D,MAAF,IAAS4D,EAAT,EAASA,MAAT,IAAgBC,KAAOC,EAAvB,EAAuBA,QAASC,EAAhC,EAAgCA,QAAShK,EAAzC,EAAyCA,MAAWiK,EAApD,gDACpB,cAACnG,EAAA,EAAD,2BACImC,MAAO,kBACPjG,MAAO+J,GAAWC,EAClBE,WAAYH,GAAW/J,EACvBkG,WAAS,EACTiE,WAAS,EACT3D,WAAS,EACT4D,QAAS,EACT1L,KAAM,QACN2L,aAAc,MACdvR,GAAG,iBACHkL,QAAQ,WACRlG,MAAO,CAACwM,YAAa,SACjBT,GACAI,KAIRM,GAAeC,aAAiB,KAkB9B1B,GAAsB2B,aAAU,CAACC,KAAM,wBAAjBD,EAjBL,SAAC1N,GACpB,OACI,uBAAMgM,SAAUhM,EAAM4N,aAAc7M,MAAO,CAACzB,QAAQ,OAAQ2G,cAAc,MAAOpF,MAAM,QAAvF,UACI,cAACgN,GAAA,EAAD,CAAOC,UAAWjB,GACXkB,KAAM,iBACNC,SAAU,CAACC,KAAeT,MAEjC,cAACxG,EAAA,EAAD,CAAQC,QAAQ,YACRrL,KAAM,SACNsS,QAAS,cAACC,GAAA,EAAD,IAFjB,wBCjIGC,GAFOC,cAhBE,SAAC3S,GACrB,MAAO,CACH0P,YAAa1P,EAAM4S,eAGA,SAACvR,GACxB,MAAO,CACHuH,YAAa,SAACiK,GACXxR,EAASyR,aAAmBD,KAE/BhE,eAAgB,SAACkE,GACb1R,EAAS2R,aAAsBD,QAKrBJ,CAA6C5D,I,2QChB7DkE,GAAsBhP,YAAO,MAAPA,EAAc,kBAAEV,EAAF,EAAEA,MAAF,UACtCG,OAAQ,OACRyB,MAAO,MACPvB,QAAS,OACTG,WAAY,SACZwG,cAAe,MACfzG,MAAO,SAN+B,cAOrCP,EAAMqH,YAAYC,KAAK,MAAQ,CAC5B1F,MAAO,QAR2B,cAUrC5B,EAAMqH,YAAYK,GAAG,MAAQ,CAC1B9F,MAAO,QAX2B,cAarC5B,EAAMqH,YAAYK,GAAG,MAAQ,CAC1B9F,MAAO,QAd2B,KAiBpC7B,GAAS,SAACC,GAAD,MAAiB,CAC5B2F,QAAS,CACLC,eAAgB,OAAQrF,MAAO,aAOxB,SAASoP,GAAO5O,GAE3B,IAAM6O,EAASC,cAAmC,SAAApT,GAAK,OAAIA,EAAMqT,KAAKF,UAGhE5O,EAAUC,YAAWlB,IALwB,EAOnBc,WAAmC,MAPhB,mBAO5CkP,EAP4C,KAOlCC,EAPkC,OAQCnP,WAAmC,MARpC,mBAQ5CoP,EAR4C,KAQxBC,EARwB,OASzBrP,YAAe,GATU,mBAS5CpE,EAT4C,KASrC0T,EATqC,KAW7CC,EAAe,SAACzH,GAAD,OAAmB,SAAC1C,GACrCkK,GAAU1T,KAmCR4T,EAAmBC,QAAQL,GAE3BM,EAAwB,SAACtK,GAC3B+J,EAAY/J,EAAMmE,gBAYhBzB,EAAO2H,QAAQP,GACfS,EAAc,WAChBR,EAAY,OAIVS,EACF,eAACC,GAAA,EAAD,CACIX,SAAUA,EACVpH,KAAMA,EACN0E,QAASmD,EACTpO,QAASoO,EACTG,WAAY,CACR9J,UAAW,EACXhI,GAAI,CACA2O,SAAU,UACVpQ,OAAQ,4CACRwT,GAAI,IACJ,oBAAqB,CACjBhP,MAAO,GACPC,OAAQ,GACRgP,IAAK,GACLC,GAAI,GAER,WAAY,CACRC,QAAS,KACT1Q,QAAS,QACTvB,SAAU,WACVC,IAAK,EACL6D,MAAO,GACPhB,MAAO,GACPC,OAAQ,GACRmP,QAAS,mBACTC,UAAW,iCACXC,OAAQ,KAIpBC,gBAAiB,CAACC,WAAY,QAASC,SAAU,OACjDC,aAAc,CAACF,WAAY,QAASC,SAAU,UAhClD,UAkCI,cAAC,IAAD,CAASnL,GAAG,IAAInE,UAAWf,EAAQ2E,QAAnC,SACI,eAAC4L,GAAA,EAAD,CAAUzP,MAAO,CAACzB,QAAQ,OAAQ2G,cAAe,OAAjD,UACI,cAACuE,GAAA,EAAD,IACA,eAAC5K,EAAA,EAAD,CAAMS,MAAI,EAACU,MAAO,CAACzB,QAAQ,OAAQ2G,cAAe,UAAlD,UACKjG,EAAMyQ,MACP,cAACtG,GAAA,EAAD,CAAYlD,QAAS,UAArB,mCAIZ,cAACxB,EAAA,EAAD,IACA,eAAC+K,GAAA,EAAD,WACI,cAAC9K,EAAA,EAAD,UACI,cAAC,KAAD,CAAUnG,SAAS,YAF3B,cAMA,eAACiR,GAAA,EAAD,CAAUnP,QAtGH,WAIX,OAHGwN,GACC7O,EAAM0Q,SAEH,cAAC,IAAD,CAAUvL,GAAI,YAkGjB,UACI,cAACO,EAAA,EAAD,UACI,cAACiL,GAAA,EAAD,CAAQpR,SAAS,YAFzB,eASFqR,EAAe,qCACfC,EACF,eAAClB,GAAA,EAAD,CACIX,SAAUE,EACVqB,aAAc,CACVD,SAAU,MACVD,WAAY,SAEhBtU,GAAI6U,EACJE,aAAW,EACXV,gBAAiB,CACbE,SAAU,MACVD,WAAY,SAEhBzI,KAAM0H,EACNhD,QA1FsB,WAC1B6C,EAAsB,OA4EtB,UAeI,eAACqB,GAAA,EAAD,WACI,cAACpI,EAAA,EAAD,CAAYzG,KAAK,QAAQ0G,aAAW,mBAAmB7I,MAAM,UAA7D,SACI,cAACuR,GAAA,EAAD,CAAOC,aAAc,EAAGxR,MAAM,QAA9B,SACI,cAAC,KAAD,QAGR,4CAEJ,eAACgR,GAAA,EAAD,WACI,cAACpI,EAAA,EAAD,CACIzG,KAAK,QACL0G,aAAW,4BACX7I,MAAM,UAHV,SAKI,cAACuR,GAAA,EAAD,CAAOC,aAAc,GAAIxR,MAAM,QAA/B,SACI,cAAC,KAAD,QAGR,iDAEJ,eAACgR,GAAA,EAAD,CAAUnP,QAASmO,EAAnB,UACI,cAACpH,EAAA,EAAD,CACIzG,KAAK,QACL0G,aAAW,0BACX4I,gBAAc,8BACdC,gBAAc,OACd1R,MAAM,UALV,SAOI,cAAC,KAAD,MAEJ,2CAEJ,cAACiG,EAAA,EAAD,OAKR,OACI,eAAC0L,GAAA,EAAD,CAAKrT,GAAI,CAACsT,SAAU,GAApB,UACI,cAACC,GAAA,EAAD,CAAQtT,SAAS,SAASgD,MAAO,CAACuQ,UAAW,WAA7C,SACI,eAAC3C,GAAD,WACI,eAACvG,EAAA,EAAD,CACItK,GAAI,CAACwB,QAAS,CAACsG,GAAI,QAAS2L,GAAI,QAAS9F,GAAI,OAAQ+F,GAAI,SACzD7P,KAAK,QACL2G,KAAK,QACL9I,MAAM,UACN6I,aAAW,cACXhH,QAASgO,IANb,UAQI,cAAC,KAAD,IACA,cAACoC,GAAA,EAAD,CACIC,OAAQ,OACR9J,KAAMlM,EACN4Q,QAAS+C,IAHb,SA1KhB,eAAC8B,GAAA,EAAD,CACIpQ,MAAO,CAACiF,UAAW,OAAQnF,MAAO,SAClC8Q,KAAK,eACLC,UAAWvC,IACXhO,QAASgO,IAJb,UAMI,eAACzP,EAAA,EAAD,CAAMQ,WAAS,EAACC,MAAI,EAACE,UAAW,MAAOuG,SAAU,SAAUrH,WAAY,SAAvE,UACI,cAAC+K,GAAA,EAAD,CACIhK,IAAI,aACJC,IAAI,4DACJ3C,GAAI,CAAC+C,MAAO,GAAIC,OAAQ,GAAI1B,OAAQ,UAGxC,cAACQ,EAAA,EAAD,CAAMQ,WAAS,EAACC,MAAI,EAACE,UAAW,SAAUuG,SAAU,OAApD,SACI,cAACqD,GAAA,EAAD,CAAYlD,QAAS,YAAalG,MAAO,CAAC5B,QAAS,GAAnD,SAAwDa,EAAMyQ,aAGtE,cAAChL,EAAA,EAAD,IACA,cAACX,EAAD,YAgKQ,cAACqF,GAAA,EAAD,CACIlD,QAAQ,KACR4K,QAAM,EACN/D,UAAU,MACVhQ,GAAI,CAACwB,QAAS,CAACsG,GAAI,OAAQ2L,GAAI,UAJnC,4BAQA,cAACJ,GAAA,EAAD,CAAKrT,GAAI,CAACsT,SAAU,KAEnBpR,EAAM6O,OACH,eAACsC,GAAA,EAAD,CAAKrT,GAAI,CAACwB,QAAS,CAACsG,GAAI,OAAQ6F,GAAI,SAApC,UACI,cAACrD,EAAA,EAAD,CAAYzG,KAAK,QAAQ0G,aAAW,mBAAmB7I,MAAM,UAA7D,SACI,cAACuR,GAAA,EAAD,CAAOC,aAAc,EAAGxR,MAAM,QAA9B,SACI,cAAC,KAAD,QAGR,cAAC4I,EAAA,EAAD,CACIzG,KAAK,QACL0G,aAAW,4BACX7I,MAAM,UAHV,SAKI,cAACuR,GAAA,EAAD,CAAOC,aAAc,GAAIxR,MAAM,QAA/B,SACI,cAAC,KAAD,QAGR,eAAC4I,EAAA,EAAD,CACIzG,KAAK,QACL2G,KAAK,MACL2I,gBArKb,8BAsKa5P,QAASmO,EACThQ,MAAM,UALV,UAOI,cAAC2K,GAAA,EAAD,CAAYlD,QAAS,QAArB,SACKjH,EAAMyQ,QAEX,cAAC,KAAD,UAIN,cAAC,IAAD,CAAStL,GAAI,SAAUnE,UAAWf,EAAQ2E,QAA1C,SACE,cAACoC,EAAA,EAAD,CAAQC,QAAS,OACTzH,MAAO,UACPmC,KAAM,QAFd,qBAMR,cAACwP,GAAA,EAAD,CAAKrT,GAAI,CAACwB,QAAS,CAACsG,GAAI,OAAQ6F,GAAI,SAApC,SACI,cAACrD,EAAA,EAAD,CACIzG,KAAK,QACL0G,aAAW,YACX4I,gBAAeL,EACfM,gBAAc,OACd7P,QAvMK,SAAC6D,GAC1BiK,EAAsBjK,EAAMmE,gBAuMR7J,MAAM,UANV,SAQI,cAAC,KAAD,aAKfqR,EACAnB,K,+DC3SPzU,GAAe,CACjBc,GAAI,KACJ+V,MAAO,KACPrB,MAAO,KACP5B,QAAQ,GAeCkD,GAAkB,SAAChW,EAAmB+V,EAAsBrB,EAAsB5B,GAC3F,MAAO,CACHjT,KA/Bc,oCAgCd4B,KAAM,CAACzB,KAAI+V,QAAOrB,QAAO5B,YAMpBmD,GAAkB,2DAAM,WAAOjV,GAAP,wBAAAC,EAAA,sEACZiV,KAAQC,KADI,OAC7B/U,EAD6B,SAERA,EAASK,KAA7BzB,EAF4B,EAE5BA,GAAI0U,EAFwB,EAExBA,MAAOqB,EAFiB,EAEjBA,MACY,IAAxB3U,EAASM,YACTV,EAASgV,GAAgBhW,EAAI+V,EAAOrB,GAAO,IAJd,2CAAN,uDC3BzB0B,G,gKAEF,WACI,OAAO,cAACvD,GAAD,gBAAYwD,KAAKpS,Y,GAHFF,aAgBfuO,iBAPS,SAAC3S,GACrB,MAAO,CACHmT,OAAQnT,EAAMqT,KAAKF,OACnB4B,MAAO/U,EAAMqT,KAAK0B,SAIc,CAACuB,mBAAiBtB,ODiCpC,2DAAM,WAAO3T,GAAP,UAAAC,EAAA,sEACHiV,KAAQvB,SADL,OAES,IAFT,OAEXlT,KAAKC,YACdV,EAASgV,GAAgB,KAAM,KAAM,MAAM,IAHvB,2CAAN,wDCjCP1D,CAAoD8D,I,mDCJ7DtF,GAAkB,SAAC,GAAD,IAAE3D,EAAF,EAAEA,MAAO4D,EAAT,EAASA,MAAT,IAAgBC,KAAOC,EAAvB,EAAuBA,QAASC,EAAhC,EAAgCA,QAAShK,EAAzC,EAAyCA,MAAWiK,EAApD,gDACpB,cAACnG,EAAA,EAAD,2BACImC,MAAOA,EACPjG,MAAO+J,GAAWC,EAClBE,WAAYH,GAAW/J,EACvBkG,WAAS,EACTlC,QAAQ,YACJ6F,GACAI,KAKNmF,GAAiB,SAAC,GAAD,IAAEvF,EAAF,EAAEA,MAAO5D,EAAT,EAASA,MAAT,OACnB,cAACoJ,GAAA,EAAD,CACIC,QACI,cAACC,GAAA,EAAD,CACIC,UAAW3F,EAAMxD,MACjBF,SAAU0D,EAAM1D,WAGxBF,MAAOA,KA+BTwJ,GAAiBhF,aAAwB,CAACC,KAAM,SAA/BD,EA1BsC,SAAC,GAA2B,IAA1BE,EAAyB,EAAzBA,aAAc3K,EAAW,EAAXA,MAEzE,OACI,uBAAM+I,SAAU4B,EAAhB,UACI,cAACC,GAAA,EAAD,CAAOE,KAAM,QACN7E,MAAM,QACN4E,UAAWjB,GACXmB,SAAU,CAACC,QAElB,cAACJ,GAAA,EAAD,CAAOE,KAAM,WACNnS,KAAM,WACNsN,MAAM,WACN4E,UAAWjB,GACXmB,SAAU,CAACC,QAElB,eAACrO,EAAA,EAAD,CAAMS,MAAI,EAACyG,SAAU,OAArB,UACI,cAAC+G,GAAA,EAAD,CAAOE,KAAM,aAAc7E,MAAM,cAAc4E,UAAWuE,KAC1D,cAACrL,EAAA,EAAD,CAAQC,QAAS,YAAarL,KAAM,SAAU4D,MAAO,UAArD,wBAEHyD,GAAS,cAAC0P,GAAA,EAAD,CAAMnT,MAAO,QAASoT,KAAM,cAAC,KAAD,IAAqB1J,MAAOjG,EAC3DlC,MAAO,CAAC3B,OAAQ,OAAQ4G,UAAW,OAAQnF,MAAO,gBA6CtDwN,gBAAQ,KAAM,CAACoC,MFlET,SAACqB,EAAee,EAAkBC,GAAlC,gDAA0D,WAAO/V,GAAP,gBAAAC,EAAA,sEACtDiV,KAAQxB,MAAMqB,EAAOe,EAAUC,GADuB,OAE1C,KAD7B3V,EADuE,QAE9DK,KAAKC,WAEdV,EAASiV,MAETjV,EAASgW,aAAW,QAAS,CAACC,OAAQ7V,EAASK,KAAKqG,YANmB,2CAA1D,wDEkENwK,EAhCD,SAACrO,GASX,OAPe8O,cAAmC,SAAApT,GAAK,OAAIA,EAAMqT,KAAKF,UAQ3D,cAAC,IAAD,CAAU1J,GAAI,aAIrB,eAAC8N,GAAD,WACI,eAACC,GAAD,CAAoBpN,UAAW,EAA/B,UACI,eAACqE,GAAA,EAAD,CAAYgJ,WAAY,OAAQlM,QAAS,KAAzC,2FAC8B,mDAC9B,cAACkD,GAAA,EAAD,CAAYlD,QAAS,YAArB,6EAEA,+BACI,oDACA,4CAGR,cAACmM,GAAD,CAAoBtN,UAAW,EAA/B,SACI,cAAC4M,GAAD,CAAgB1G,SAtBX,SAACqH,GACdrT,EAAMyQ,MAAM4C,EAAS5C,MAAO4C,EAASR,SAAUQ,EAASP,uBA6B1DG,GAAuBtT,YAAOkG,IAAPlG,CAAH,2QAcpBuT,GAAqBvT,YAAOkG,IAAPlG,CAAH,0PAelByT,GAAqBzT,YAAOkG,IAAPlG,CAAH,0UChJlB1E,GAAe,CACjBqY,aAAa,GCJV,SAASC,GAAkBC,GAC9B,OAAO,SAACxT,GACJ,OACI,cAAC,IAAMyT,SAAP,CAAgBC,SAAU,6CAA1B,SACI,cAACF,EAAD,gBAAsBxT,OCuBtC,IAAM2T,GAAmB7T,IAAM8T,MAAK,kBAAM,uDACpCC,GAAmB/T,IAAM8T,MAAK,kBAAM,iCACpCE,GAAiBhU,IAAM8T,MAAK,kBAAM,uDAClCnJ,GAAO3K,IAAM8T,MAAK,kBAAM,iCAExBG,GAAaC,YAAY,CAC3BxN,QAAS,CACLyN,KAAM,QACNzO,QAAS,CACLkB,KAAM,WAEVD,UAAW,CACPC,KAAM,cAIZwN,GAAYF,YAAY,CAC1BxN,QAAS,CACLyN,KAAM,OACNzO,QAAS,CACLkB,KAAM,WAEVD,UAAW,CACPC,KAAM,cAMZyN,GAAuBxU,YAAO,MAAPA,EAAc,kBAAEV,EAAF,EAAEA,MAAF,UACvCmS,SAAU,EACVhS,OAAQ,OACRyB,MAAO,MACPmF,UAAW,OACXoO,aAAc,QALyB,cAMtCnV,EAAMqH,YAAYC,KAAK,MAAQ,CAC5B1F,MAAO,QAP4B,cAStC5B,EAAMqH,YAAYK,GAAG,MAAQ,CAC1B9F,MAAO,QAV4B,cAYtC5B,EAAMqH,YAAYK,GAAG,MAAQ,CAC1B9F,MAAO,QAb4B,KAiBrC7B,GAAS,SAACC,GAAD,cAAiB,CAC5BoV,eAAa,GACTC,IAAK,IADI,cAERrV,EAAMqH,YAAYiO,QAAQ,KAAM,MAAQ,CACrCjV,QAAS,OACT2G,cAAe,SACfa,SAAU,OACVkD,eAAgB,SAChBnJ,MAAO,OACPpB,WAAY,WARP,cAURR,EAAMqH,YAAYiO,QAAQ,KAAM,MAAQ,CACrCjV,QAAS,OACT2G,cAAe,MACfa,SAAU,WAbL,cAeR7H,EAAMqH,YAAYK,GAAG,MAAQ,CAC1BrH,QAAS,OACTiB,UAAW,MACXuG,SAAU,WAlBL,GAsBb0N,qBAAmB,mBACdvV,EAAMqH,YAAYiO,QAAQ,KAAM,MAAQ,CACrCjV,QAAS,SAFE,cAIdL,EAAMqH,YAAYmO,KAAK,MAAQ,CAC5BnV,QAAS,OACTuB,MAAO,OACP4L,SAAU,WAPC,KAejBiI,GAAmBnB,GAAaI,IAChCgB,GAAmBpB,GAAaM,IAChCe,GAAiBrB,GAAaO,IAC9Be,GAAgBtB,GAAa9I,IA+EpBqK,OA5Ef,WACI9R,QAAQ+R,IAAI,OACZ,IAAM9U,EAAUC,YAAWlB,IACrBjC,EAAWoD,eAHN,EAKuBwH,oBAAS,GALhC,mBAKJqN,EALI,KAKQC,EALR,KAWLpG,EAASC,cAAmC,SAAApT,GAAK,OAAIA,EAAMqT,KAAKF,UAChEyE,EAAcxE,cAAmC,SAAApT,GAAK,OAAIA,EAAMwZ,IAAI5B,eAO1E,OAJAtI,qBAAU,WACNjO,EF1GqB,yCAAM,WAAOA,GAAP,gBAAAC,EAAA,6DAC3BmY,EAAUpY,EAASiV,MADQ,SAEzBoD,QAAQC,IAAI,CAACF,IAFY,OAG/BpY,EAVO,CACHnB,KArBoB,oCA2BO,2CAAN,yDE2GtB,IAEE0X,EAKD,eAACgC,EAAA,EAAD,CAAerW,MAAO+V,EAAad,GAAYH,GAA/C,UACI,cAACwB,EAAA,EAAD,IACA,sBAAKvU,UAAU,MAAf,UACI,cAAC,GAAD,IACA,cAACmT,GAAD,UACI,eAACvU,EAAA,EAAD,CAAMS,MAAI,EAACW,UAAWf,EAAQoU,cAA9B,UACKxF,GAAU,cAACjP,EAAA,EAAD,CAAMS,MAAI,EAACW,UAAWf,EAAQuU,oBAA9B,SACP,cAAC5U,EAAA,EAAD,CAAMS,MAAI,EAAV,SACI,cAACyE,EAAD,QAGR,eAAC,IAAD,WACI,cAAC,IAAD,CAAOoD,OAAK,EAACsN,KAAK,IAAlB,SACI,cAAC,IAAD,CAAUrQ,GAAG,eAEjB,cAAC,IAAD,CAAOqQ,KAAK,oBAAoBC,OAAQ,kBAAM,cAACd,GAAD,OAC9C,cAAC,IAAD,CAAOzM,OAAK,EAACsN,KAAK,WAAWC,OAAQ,kBACjC,eAAC7V,EAAA,EAAD,CAAMQ,WAAS,EAACC,MAAI,EAACC,QAAS,EAAG2F,cAAe,MAAOa,SAAU,SAAjE,UACI,cAAC4N,GAAD,IACA,cAAC,GAAD,UAGR,cAAC,IAAD,CAAOc,KAAK,eAAeC,OAAQ,kBAC/B,eAAC7V,EAAA,EAAD,CAAMQ,WAAS,EAACC,MAAI,EAACC,QAAS,EAAG2F,cAAe,MAAOa,SAAU,SAAjE,UACI,cAAC,GAAD,IACA,cAAC,GAAD,UAGR,cAAC,IAAD,CAAO0O,KAAK,SAASC,OAAQ,kBAAM,cAACb,GAAD,OACnC,cAAC,IAAD,CAAOY,KAAK,QAAQC,OAAQ,kBAAM,cAAC,GAAD,OAClC,cAAC,IAAD,CAAOD,KAAK,SAASC,OAAQ,kBAAM,cAAC,EAAD,OACnC,cAAC,IAAD,CAAOD,KAAK,eAAeC,OAAQ,kBAAM,cAAC,GAAD,OACzC,cAAC,IAAD,CAAOD,KAAK,UAAUC,OAAQ,kBAAM,cAAC,GAAD,OACpC,cAAC,IAAD,CAAOD,KAAK,UAAUC,OAAQ,kBAAM,cAAC,GAAD,OACpC,cAAC,IAAD,CAAOD,KAAK,YAAYC,OAAQ,kBAAM,cAAC,GAAD,OACtC,cAAC,IAAD,CAAOD,KAAK,SAASC,OAAQ,kBAAM,cAAC,GAAD,OACnC,cAAC,IAAD,CAAOD,KAAK,QAAQC,OAAQ,kBAAM,cAACZ,GAAD,eAK9C,cAACa,GAAD,CAAYrN,aAAW,gBAAgB1G,KAAM,QAASN,QA1D1C,WACpB4T,GAAaD,IAyDL,SACKA,EACK,cAACW,EAAA,EAAD,CAASC,MAAM,kBAAf,SAAiC,cAAC,KAAD,CAAepW,MAAO,cACvD,cAACmW,EAAA,EAAD,CAASC,MAAM,iBAAf,SAAgC,cAAC,KAAD,cAhD3C,cAAC/X,EAAA,EAAD,KA0DT6X,GAAa/V,YAAOyI,IAAPzI,CAAH,+ECxLDkW,GAZS,SAACC,GACnBA,GAAeA,aAAuBC,UACxC,8BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,O,0DCGVQ,GAAeC,aAAgB,CAC/BC,YAAaC,KACbnI,WAAYoI,KACZC,UAAUlb,KACVsT,KPMuB,WAAkE,IAAjErT,EAAgE,uDAAtCT,GAAcU,EAAwB,uCACxF,OAAQA,EAAOC,MACX,IAAK,oCACD,OAAO,6BAAIF,GAAUC,EAAO6B,MAChC,QACI,OAAO9B,IOVfiS,KAAMiJ,KACN1B,IJRsB,WAAkE,IAAjExZ,EAAgE,uDAAtCT,GAAcU,EAAwB,uCACvF,OAAQA,EAAOC,MACX,IAAK,kCACD,OAAO,6BAAIF,GAAX,IAAkB4X,aAAa,IACnC,QACI,OAAO5X,IIIfmb,KAAMtS,OAKJuS,GAAmBC,OAAOC,sCAAwCC,QAKlEC,GAAQC,aAAYb,GAAcQ,GAAiBM,aAAgBC,QAM1DH,MAGfH,OAAOG,MAAQA,G,sBC5BfI,EAAMC,SAASC,QAAQC,OAAQ,WAAa,uCAE5CC,IAASjC,OACL,cAAC,IAAMkC,WAAP,UACI,cAAC,IAAD,UACI,cAAC,KAAD,CAAUT,MAAOA,GAAjB,SACI,cAAC,GAAD,UAIZU,SAASC,eAAe,SAM5BhC,M,gCC1BA,mHASMiC,EATN,OASiBR,EAAMS,OAAO,CAC1BC,iBAAiB,EACjBR,QAAQ,CACJ,UAAY,wCAEhBS,QAAS,kDAGAhb,EAAW,CACpBC,SAAU,SAAC7B,EAAqBF,EAAkBG,GAC9C,OAAOwc,EAASI,IAAT,qBAAiD7c,EAAjD,kBAAsEF,EAAtE,mBAAyFG,IAC3F0a,MAAK,SAAA7Y,GAAQ,OAAIA,EAASK,SAEnCE,OAAQ,SAAC3B,GACL,OAAO+b,EAASK,KAAT,iBAAuDpc,KAElE6B,SAAU,SAAC7B,GACP,OAAO+b,EAASM,OAAT,iBAAyDrc,MAI3Dsc,EAAa,CACtBC,WAAY,SAACtc,GACT,OAAO8b,EAASI,IAAT,kBAAgDlc,IAClDga,MAAK,SAAA7Y,GAAQ,OAAIA,EAASK,SAEnC+a,UAAW,SAACvc,GAER,OAAO8b,EAASI,IAAT,yBAAoClc,IACtCga,MAAK,SAAA7Y,GAAQ,OAAIA,EAASK,SAEnCgb,aAAc,SAACpV,GAEX,OAAO0U,EAASW,IAAT,iBAAoC,CAACrV,WACvC4S,MAAK,SAAA7Y,GAAQ,OAAIA,EAASK,UAK1ByU,EAAU,CACnBC,GAAI,WACA,OAAO4F,EAASI,IAAyB,WACpClC,MAAK,SAAA7Y,GAAQ,OAAIA,EAASK,SAEnCiT,MAAO,SAACqB,EAAee,GAAmD,IAAjCC,EAAgC,wDACrE,OAAOgF,EAASK,KAAU,aAAc,CAACrG,QAAOe,WAAUC,gBAE9DpC,OAAQ,WACJ,OAAOoH,EAASM,OAAY,iB,oECpCrBlY,IAjBI,SAACwY,GAChB,IAAMzZ,EAAQ0Z,cACd,OAAOC,mBAAQ,WACX,IAAMC,EAAsC,oBAAlBH,EACpBA,EAAczZ,GACdyZ,EACAI,EAAe,GAOrB,OALAC,OAAOC,QAAQH,GAAYjW,SAAQ,YAAwB,IAAD,mBAArBqW,EAAqB,YAAhB3P,OAAgB,MAAR,GAAQ,EAEtDwP,EAASG,GAAOC,YAAI5P,MAGjBwP,IACR,CAACJ,EAAezZ,M,sOCMjBhE,EAA+B,CACjCke,QAAS,CACL,CAACpd,GAAIyI,cAAMuJ,KAAM,QACjB,CAAChS,GAAIyI,cAAMuJ,KAAM,QACjB,CAAChS,GAAIyI,cAAMuJ,KAAM,WACjB,CAAChS,GAAIyI,cAAMuJ,KAAM,QACjB,CAAChS,GAAIyI,cAAMuJ,KAAM,QACjB,CAAChS,GAAIyI,cAAMuJ,KAAM,SACjB,CAAChS,GAAIyI,cAAMuJ,KAAM,SACjB,CAAChS,GAAIyI,cAAMuJ,KAAM,WACjB,CAAChS,GAAIyI,cAAMuJ,KAAM,SACjB,CAAChS,GAAIyI,cAAMuJ,KAAM,WACjB,CAAChS,GAAIyI,cAAMuJ,KAAM,UACjB,CAAChS,GAAIyI,cAAMuJ,KAAM,WAErBlK,SAAU,CACN,CAAC9H,GAAIyI,cAAMhD,QAAS,KAAMkI,QAAO,GACjC,CAAC3N,GAAIyI,cAAMhD,QAAS,2BAA4BkI,QAAO,GACvD,CAAC3N,GAAIyI,cAAMhD,QAAS,KAAMkI,QAAO,GACjC,CAAC3N,GAAIyI,cAAMhD,QAAS,KAAMkI,QAAO,GACjC,CACI3N,GAAIyI,cACJhD,QAAS,mNAETkI,QAAO,KAKNgN,EAAiB,WAAqF,IAApFhb,EAAmF,uDAAzDT,EAAcU,EAA2C,uCAC9G,OAAQA,EAAOC,MACX,IAAK,eACD,IAAIwd,EAAU,CACVrd,GAAIyI,cACJhD,QAAS7F,EAAO4S,YAChB7E,QAAO,GAEX,OAAO,2BAAIhO,GAAX,IAAkBmI,SAAS,GAAD,mBAAKnI,EAAMmI,UAAX,CAAqBuV,MAEnD,IAAK,gBACD,OAAO,2BAAI1d,GAAX,IAAkByd,QAAQ,YAAIzd,EAAMyd,QAAQ9c,QAAO,SAAAgd,GAAC,OAAIA,EAAEtd,KAAOJ,EAAO2d,eAE5E,IAAK,kBACD,OAAO,2BAAI5d,GAAX,IAAkBmI,SAAS,YAAKnI,EAAMmI,SAASxH,QAAO,SAAAqC,GAAC,OAAK/C,EAAOoP,iBAAiBQ,SAAS7M,EAAE3C,UAEnG,IAAK,gBACD,OAAO,2BAAIL,GAAX,IAAkBmI,SAAUnI,EAAMmI,SAAShI,KAAI,SAAA6C,GAAC,OAAIA,EAAE3C,KAAOJ,EAAO2P,OAAhB,2BACtC5M,GADsC,IACnC8C,QAAS7F,EAAO4S,YAAa7E,QAAShL,EAAEgL,SAC/ChL,OAEd,QACI,OAAOhD,IAON8S,EAAqB,SAACD,GAC/B,MAAO,CACH3S,KAlFa,eAmFb2S,gBAKKG,EAAuB,SAAC3D,GACjC,MAAO,CACHnP,KAxFgB,kBAyFhBmP,qBAMKwO,EAAqB,SAACD,GAC/B,MAAO,CACH1d,KAlGc,gBAmGd0d,SAAUA,IAKL9P,EAAe,SAAC8B,EAAgBiD,GACzC,MAAO,CACH3S,KAxGc,gBAyGd0P,SAAQiD,iB,gCC9GhB,oEAAO,IAAMN,EAAgB,SAAC3E,GAC1B,IAAGA,EACH,MAAO,qBAIEmE,EAAmB,SAAC+L,GAAD,OAAuB,SAAClQ,GACpD,GAAGA,EAAM3E,OAAS6U,EAAW,MAAM,iBAAN,OAAwBA,EAAxB,e,sXCqC3Bve,EAAgC,CAClCwe,MAAO,CACH,CAAC1d,GAAIyI,cAAMhD,QAAS,mBAAoBC,UAAW,GAAIC,SAAS,GAChE,CAAC3F,GAAIyI,cAAMhD,QAAS,sBAAwBC,UAAW,GAAIC,SAAS,GACpE,CACI3F,GAAIyI,cACJhD,QAAS,kNACTC,UAAW,EACXC,SAAS,GAEb,CAAC3F,GAAIyI,cAAMhD,QAAS,SAAUC,UAAW,GAAIC,SAAS,IAE1DgY,QAAS,CACLC,QAAS,GACTC,SAAU,CACNC,SAAU,GACVC,QAAS,GACTC,GAAI,GACJC,QAAS,GACTC,UAAW,GACXC,QAAS,GACTC,OAAQ,GACRC,SAAU,IAEdC,gBAAgB,EAChBC,0BAA2B,GAC3BC,SAAU,GACVve,OAAQ,KACR0E,OAAQ,CACJC,MAAO,KACP6Z,MAAO,OAGfpX,OAAQ,IAICqT,EAAiB,WAAoF,IAAnF/a,EAAkF,uDAAxDT,EAAcU,EAA0C,uCAC7G,OAAQA,EAAOC,MACX,IAAK,WACD,IAAI6e,EAAU,CACV1e,GAAIyI,cACJhD,QAAS7F,EAAO+e,YAChBjZ,UAAW,EACXC,SAAS,GAEb,OAAO,2BAAIhG,GAAX,IAAkB+d,MAAM,CAAEgB,GAAH,mBAAe/e,EAAM+d,UAEhD,IAAK,cACD,OAAO,2BAAI/d,GAAX,IAAkB+d,MAAM,YAAK/d,EAAM+d,MAAMpd,QAAO,SAAAse,GAAC,OAAIA,EAAE5e,KAAOJ,EAAOif,aAEzE,IAAK,mBACD,OAAO,2BAAIlf,GAAX,IAAkBge,QAAS/d,EAAO+d,UAEtC,IAAK,aACD,OAAO,2BAAIhe,GAAX,IAAkB0H,OAAQzH,EAAOyH,SAErC,IAAK,WACD,OAAO,2BACA1H,GADP,IACc+d,MAAO/d,EAAM+d,MAAM5d,KAAI,SAAA8e,GAAC,OAAIA,EAAE5e,KAAOJ,EAAOif,OAAhB,2BAC5BD,GAD4B,IACzBlZ,UAAWkZ,EAAElZ,UAAY,EAAGC,SAAS,IAAQiZ,OAGlE,IAAK,cACD,OAAO,2BACAjf,GADP,IACc+d,MAAO/d,EAAM+d,MAAM5d,KAAI,SAAA8e,GAAC,OAAIA,EAAE5e,KAAOJ,EAAOif,OAAhB,2BAC5BD,GAD4B,IACzBlZ,UAAWkZ,EAAElZ,UAAY,EAAGC,SAAS,IAASiZ,OAEnE,QACI,OAAOjf,IAaNmf,EAAuB,SAACH,GACjC,MAAO,CACH9e,KA3HS,WA4HT8e,gBAKKI,EAAoB,SAACF,GAC9B,MAAO,CACHhf,KAlIY,cAmIZgf,OAAQA,IAaHG,EAAY,SAAC3X,GACtB,MAAO,CACHxH,KAhJW,aAiJXwH,WAKKtB,EAAU,SAAC8Y,GACpB,MAAO,CACHhf,KAvJS,WAwJTgf,WAKKhZ,EAAa,SAACgZ,GACvB,MAAO,CACHhf,KA9JY,cA+JZgf,WAMKI,EAAiB,SAAChf,GAAD,8CAAoB,WAAOe,GAAP,eAAAC,EAAA,6DAC9CD,EAASJ,aAAiB,IADoB,SAEzB0b,IAAWC,WAAWtc,GAFG,OAE1CmB,EAF0C,OAG9CJ,EAnCO,CACHnB,KAzIiB,mBA0IjB8d,QAiCoBvc,IAHsB,2CAApB,uDAOjBob,EAAY,SAACvc,GAAD,8CAAoB,WAAOe,GAAP,eAAAC,EAAA,sEACpBqb,IAAWE,UAAUvc,GADD,OACrCmB,EADqC,OAEzCJ,EAASge,EAAU5d,IAFsB,2CAApB,uDAMZqb,EAAe,SAACpV,GAAD,8CAAoB,WAAOrG,GAAP,SAAAC,EAAA,sEACvBqb,IAAWG,aAAapV,GADD,OAEhB,IAFgB,OAE/B3F,YACTV,EAASge,EAAU3X,IAHqB,2CAApB,yD","file":"static/js/main.1f010a34.chunk.js","sourcesContent":["import {Dispatch} from \"redux\";\r\nimport {usersAPI} from \"../API/api\";\r\n\r\nconst FOLLOW = \"FOLLOW\"\r\nconst UNFOLLOW = \"UNFOLLOW\"\r\nconst SET_USERS = \"SET-USERS\"\r\nconst SET_CURRENT_PAGE = \"SET-CURRENT-PAGE\"\r\nconst SET_TOTAL_USER_COUNT = \"SET-TOTAL-USER-COUNT\"\r\nconst SET_USER_COUNT_PER_PAGE = \"SET-USER-COUNT-PER-PAGE\"\r\nconst TOGGLE_IS_FETCHING = \"TOGGLE-IS-FETCHING\"\r\nconst TOGGLE_IS_FOLLOWING_PROGRESS = \"TOGGLE-IS-FOLLOWING-PROGRESS\"\r\nconst TOGGLE_ALL_USERS_OR_FRIENDS = \"TOGGLE-ALL-USERS-OR-FRIENDS\"\r\n\r\nexport type locationType = {\r\n    city: string | null\r\n    country: string | null\r\n}\r\nexport type PhotosType = {\r\n    small: string | null\r\n    large: string | null\r\n}\r\nexport type UserType = {\r\n    id: number\r\n    photos: PhotosType\r\n    followed: boolean\r\n    name: string\r\n    status: string\r\n    location?: locationType\r\n}\r\n\r\nexport type  InitialStateType = typeof initialState\r\nconst initialState = {\r\n    users: [] as Array<UserType>,\r\n    pageSize: 5,\r\n    totalUsersCount: 0,\r\n    currentPage: 1,\r\n    isFriends: false,\r\n    isFetching: false,\r\n    followingInProgress: [] as number[]\r\n}\r\n\r\n\r\nexport const usersReducer = (state: InitialStateType = initialState, action: ActionsType): InitialStateType => {\r\n    switch (action.type) {\r\n        case \"FOLLOW\":\r\n            return {...state, users: [...state.users.map(u => u.id === action.userId ? {...u, followed: true} : u)]}\r\n        case \"UNFOLLOW\":\r\n            return {...state, users: [...state.users.map(u => u.id === action.userId ? {...u, followed: false} : u)]}\r\n        case \"SET-USERS\":\r\n            return {...state, users: [...action.users]}\r\n        case \"SET-CURRENT-PAGE\":\r\n            return {...state, currentPage: action.page}\r\n        case \"SET-USER-COUNT-PER-PAGE\":\r\n            return {...state, pageSize: action.pageSize}\r\n        case \"SET-TOTAL-USER-COUNT\":\r\n            return {...state, totalUsersCount: action.totalCount}\r\n        case \"TOGGLE-IS-FETCHING\":\r\n            return {...state, isFetching: action.isFetching}\r\n        case \"TOGGLE-IS-FOLLOWING-PROGRESS\":\r\n            return {\r\n                ...state, followingInProgress: action.isProgress\r\n                    ? [...state.followingInProgress, action.userId]\r\n                    : [state.followingInProgress.filter(id => id !== action.userId)]\r\n            } as InitialStateType\r\n        case \"TOGGLE-ALL-USERS-OR-FRIENDS\":\r\n            return {...state, isFriends: action.isFriends}\r\n        default :\r\n            return state\r\n    }\r\n}\r\n\r\nexport type ActionsType = unfollowActionType\r\n    | followActionType\r\n    | setUsersActionType\r\n    | setPageActionType\r\n    | setTotalUserCountActionType\r\n    | toggleIsFetchingActionType\r\n    | toggleFollowingProgressActionType\r\n    | setUserCountPerPageActionType\r\n    | toggleAllUsersOrFriendsActionType\r\n\r\n\r\nexport type followActionType = ReturnType<typeof followSuccess>\r\nexport const followSuccess = (userId: number) => {\r\n    return {\r\n        type: FOLLOW,\r\n        userId\r\n    } as const\r\n}\r\n\r\nexport type unfollowActionType = ReturnType<typeof unfollowSuccess>\r\nexport const unfollowSuccess = (userId: number) => {\r\n    return {\r\n        type: UNFOLLOW,\r\n        userId\r\n    } as const\r\n}\r\n\r\nexport type setUsersActionType = ReturnType<typeof setUsers>\r\nexport const setUsers = (users: Array<UserType>) => {\r\n    return {\r\n        type: SET_USERS,\r\n        users\r\n    } as const\r\n}\r\n\r\nexport type setPageActionType = ReturnType<typeof setCurrentPage>\r\nexport const setCurrentPage = (page: number) => {\r\n    return {\r\n        type: SET_CURRENT_PAGE,\r\n        page\r\n    } as const\r\n}\r\n\r\nexport type setUserCountPerPageActionType = ReturnType<typeof setUserCountPerPage>\r\nexport const setUserCountPerPage = (pageSize: number) => {\r\n    return {\r\n        type: SET_USER_COUNT_PER_PAGE,\r\n        pageSize\r\n    } as const\r\n}\r\n\r\nexport type setTotalUserCountActionType = ReturnType<typeof setTotalUsersCount>\r\nexport const setTotalUsersCount = (totalCount: number) => {\r\n    return {\r\n        type: SET_TOTAL_USER_COUNT,\r\n        totalCount\r\n    } as const\r\n}\r\n\r\nexport type toggleIsFetchingActionType = ReturnType<typeof toggleIsFetching>\r\nexport const toggleIsFetching = (isFetching: boolean) => {\r\n    return {\r\n        type: TOGGLE_IS_FETCHING,\r\n        isFetching\r\n    } as const\r\n}\r\n\r\nexport type toggleFollowingProgressActionType = ReturnType<typeof toggleFollowingProgress>\r\nexport const toggleFollowingProgress = (isProgress: boolean, userId: number) => {\r\n    return {\r\n        type: TOGGLE_IS_FOLLOWING_PROGRESS,\r\n        isProgress, userId\r\n    } as const\r\n}\r\n\r\nexport type toggleAllUsersOrFriendsActionType = ReturnType<typeof toggleAllUsersOrFriends>\r\nexport const toggleAllUsersOrFriends = (isFriends: boolean) => {\r\n    return {\r\n        type: TOGGLE_ALL_USERS_OR_FRIENDS,\r\n        isFriends\r\n    } as const\r\n}\r\n\r\n//thunk\r\nexport const requestUsers = (page: number, pageSize: number, isFriends: boolean) => async (dispatch: Dispatch) => {\r\n    dispatch(toggleIsFetching(true))\r\n    dispatch(setCurrentPage(page))\r\n    dispatch(setUserCountPerPage(pageSize))\r\n    dispatch(toggleAllUsersOrFriends(isFriends))\r\n    let response = await usersAPI.getUsers(page, pageSize, isFriends)\r\n    dispatch(toggleIsFetching(false))\r\n    dispatch(setUsers(response.items))\r\n    dispatch(setTotalUsersCount(response.totalCount))\r\n}\r\n\r\nconst followUnfollowFlow = async (dispatch: Dispatch, userId: number,\r\n                                  apiMethod: (userId: number) => Promise<any>,\r\n                                  actionCreator: (userId: number) => ActionsType) => {\r\n    dispatch(toggleFollowingProgress(true, userId))\r\n    let response = await apiMethod(userId)\r\n    if (response.data.resultCode === 0) {\r\n        dispatch(actionCreator(userId))\r\n    }\r\n    dispatch(toggleFollowingProgress(false, userId))\r\n}\r\n\r\nexport const follow = (userId: number) => async (dispatch: Dispatch) => {\r\n    await followUnfollowFlow(dispatch, userId, usersAPI.follow.bind(usersAPI), followSuccess)\r\n}\r\n\r\nexport const unfollow = (userId: number) => async (dispatch: Dispatch) => {\r\n    await followUnfollowFlow(dispatch, userId, usersAPI.unfollow.bind(usersAPI), unfollowSuccess)\r\n}\r\n\r\n","import React from 'react';\r\nimport {Box, CircularProgress} from \"@mui/material\";\r\n\r\nfunction Preloader() {\r\n\r\n    return (\r\n        <Box sx={{position: 'absolute', top: '50%', left:'50%'}}>\r\n            <CircularProgress/>\r\n        </Box>\r\n    );\r\n}\r\n\r\nexport default Preloader;\r\n","import React from 'react';\r\nimport AccessTimeOutlined from '@mui/icons-material/AccessTimeOutlined';\r\nimport FavoriteBorderOutlinedIcon from '@mui/icons-material/FavoriteBorderOutlined';\r\nimport FavoriteIcon from '@mui/icons-material/Favorite';\r\nimport {Avatar, Grid, IconButton} from \"@mui/material\";\r\nimport ClearIcon from '@mui/icons-material/Clear';\r\nimport useClasses from \"../../../../../customHookCSS/useClasses\";\r\nimport {styled} from \"@mui/material/styles\";\r\nimport {PostType, setDislike, setLike} from '../../../../../redux/profile-reducer';\r\nimport {PhotosType} from \"../../../../../redux/users-reducer\";\r\nimport defaultUserAvatar from \"../../../../../assets/images/userAvatar.jpg\";\r\nimport {useDispatch} from \"react-redux\";\r\n\r\n\r\nfunction checkOneDigitNumbers(i: any) {\r\n    if (i < 10) {\r\n        i = \"0\" + i;\r\n    }\r\n    return i;\r\n}\r\nconst monthNames = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\",\r\n    \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"\r\n];\r\nexport const currentTime = () => {\r\n    let today = new Date();\r\n    let h = today.getHours();\r\n    let m = today.getMinutes();\r\n    let day = today.getDate()\r\n    let month = monthNames[today.getMonth()]\r\n\r\n    // add a zero in front of numbers<10\r\n    m = checkOneDigitNumbers(m);\r\n    h = checkOneDigitNumbers(h);\r\n\r\n    return `${day} ${month} ${h}:${m}`\r\n}\r\n\r\nconst styles = (theme: any) => ({\r\n    userName: {\r\n        padding: 0, margin: '15px 0 0 15px'\r\n    },\r\n    postTime: {\r\n        margin: 0,\r\n        display: 'flex',\r\n        fontSize: '14px',\r\n        color: '#b2b2b2',\r\n        alignItems: 'center'\r\n    },\r\n\r\n\r\n});\r\nconst RootPostContainer = styled(Grid)`\r\n  display: flex;\r\n  flex-direction: column;\r\n  flex-wrap: nowrap;\r\n  padding: 20px 20px 20px 20px;\r\n  align-items: stretch;\r\n  :hover {\r\n    & .MuiIconButton-root {\r\n      visibility: visible;\r\n    }\r\n  }\r\n`;\r\n\r\ntype PostPropsType = {\r\n    deletePost: (postId: string) => void\r\n    photos: PhotosType\r\n    userName: string\r\n}\r\n\r\nconst Post = React.memo((props: PostType & PostPropsType) => {\r\n\r\n    const classes = useClasses(styles);\r\n    const dispatch = useDispatch()\r\n\r\n    const addLike = () => {\r\n        dispatch(setLike(props.id))\r\n    }\r\n    const addDislike = () => {\r\n        dispatch(setDislike(props.id))\r\n    }\r\n\r\n    const removePost = () => props.deletePost(props.id)\r\n\r\n    return (\r\n        <RootPostContainer container item spacing={2}\r\n               >\r\n            <Grid container item spacing={2} direction={\"row\"} alignItems={\"flex-start\"}>\r\n                <Grid item>\r\n                    <Avatar\r\n                        alt=\"Remy Sharp\"\r\n                        src={props.photos.large\r\n                            ? props.photos.large\r\n                            : defaultUserAvatar}\r\n                        sx={{width: 50, height: 50}}\r\n                    />\r\n                </Grid>\r\n                <Grid item>\r\n                    <Grid container item spacing={2} direction={\"column\"}>\r\n                        <Grid item style={{padding: 0, margin: 0}}>\r\n                            <h3 className={classes.userName}>{props.userName}</h3>\r\n                        </Grid>\r\n                        <Grid item className={classes.postTime} style={{paddingTop: 0}}>\r\n                            <AccessTimeOutlined style={{width: '20px', paddingRight: '3px'}}/>{currentTime()}\r\n                        </Grid>\r\n                    </Grid>\r\n                </Grid>\r\n                <Grid item style={{marginLeft: 'auto', visibility:'hidden'}} >\r\n                    <IconButton style={{padding:0}}>\r\n                        <ClearIcon onClick={removePost} color={\"secondary\"} style={{marginLeft: 'auto'}}/>\r\n                    </IconButton>\r\n                </Grid>\r\n            </Grid>\r\n            <Grid item style={{wordWrap: 'break-word', paddingTop: '0'}}>\r\n                <p style={{margin: 0}}>{props.message}</p>\r\n            </Grid>\r\n            <Grid item style={{padding: 0, marginLeft: 'auto', display: 'flex'}}>\r\n                {props.likeCount}\r\n                {!props.isLiked ?\r\n                    <IconButton size={\"small\"} onClick={addLike} style={{padding: '0 0 0 5px'}}>\r\n                        <FavoriteBorderOutlinedIcon style={{color: 'red', position: 'relative', right: 0}}/>\r\n                    </IconButton>\r\n                    : <IconButton size={\"small\"} onClick={addDislike} style={{padding: '0 0 0 5px'}}>\r\n                        <FavoriteIcon style={{color: 'red', position: 'relative', right: 0}}/>\r\n                    </IconButton>}\r\n            </Grid>\r\n        </RootPostContainer>\r\n    );\r\n})\r\n\r\n\r\nexport default Post;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"settingsWrap\":\"Settings_settingsWrap__3O1GX\",\"settingListMenu\":\"Settings_settingListMenu__KqEhc\",\"settingMenu\":\"Settings_settingMenu__31it7\"};","export default \"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBxISEhUPERAWFRUXEBUVFRgVFRUQFxgYFxUWFxUXFxUYHSggGBomHRUXIjEjJSorLi4uGB8zODMsNyguLisBCgoKDg0OGxAQGi8lHyYtLS8tKy0rLS8tLS0tLSstLS0tLystLS0tLS0rLS0tNS0tLS0tLS0tLS8tLS0tLSstLf/AABEIAOEA4QMBIgACEQEDEQH/xAAcAAEAAQUBAQAAAAAAAAAAAAAABQECAwYHBAj/xABGEAABAwICBQkEBwUGBwAAAAABAAIDBBESIQUGMUFRBxMiMmFxgZGhQlKxwRQjM2JygpJTY6LC4RVDRLLR0iQ0NVR08PH/xAAZAQEAAwEBAAAAAAAAAAAAAAAAAQIEAwX/xAAkEQACAgEEAgMAAwAAAAAAAAAAAQIDEQQSMUETISIyURRhcf/aAAwDAQACEQMRAD8A7GiIpKhERAEREAREQBeTSekoaeMzVErY2Da55sPDiewLVNe+UOHR/wBTGBPUn+7DrCMEXDpSOrkQQNpv4rh2m9L1FZJz1XMZHeyNjGDgxmwd+1CUjp+sHLKwXZo+n5w/tJgY4+whmTnei0TS+vGkqn7Sscwe7B9QPMdL1WvopwWwWztxnFI5z3cXudIfNxVvMN90eSyIhJj5hvujyVY4g04mXadxaSw+YV6ICb0TrhpGmN4q2Qj3Zjz7f48/VbxoDllcOjpCmFv2tPcj80TjceB8FyxEwRg+otCacpqyMTU0zZG9mRHY5pzaewhSK+U9G101NIJ6aV0Ug9phtccHN2OHYV2jULlNjqyKWrDYaiwDTf6uY78F+q77p45KCrR0RERCAiIgCIiAIiIAiIgCIiAIiIAiIgC5/wAqGvf0Jv0SmN6qRhOLIiFpyxuB9o54Rbdn2z+vOszNHUr6ggOkPQhYfbkOwdwzJ7AvnCoqHyyPnlcXSSPL3uO9x4cANgG4IWSLCSSXOcXOcbuc4lznHiSdqIiksEREAREQBERAEREAVr23+ItkQdxB3FXIgOxclWvxmw6OrH3mAPMyusOdaNjHfvAPMDjt6ivkvO4IJDmuDmuGRa4G4IPEFfQvJprd/aFMecsKiIhkwGQOXRkHY4eRBUFWjb0REKhERAEREAREQBERAEREARFrvKBps0dBPUN6+DBH+OTot8r38EBxflL1j+nVzsD7wQExRAdUuH2kg43OV+AWrKyJmEBvAL00lM+V7YoxdznAAd/yUnRItp4HvcGMaXOOwNBcT4BbFSajVjxdzWs7Huz8hdb7q1q9HSR2FnSEdN+89g4NCmVnlc+jXDTrHyOXSagVY2GM/mI+IUPX6vVUP2lO+3Fo5xvm29vFdqVQqq6RZ6ePRwE8EXdZtHQv68LHd7Gn5LznV6kP+Fi/QF086/Dn/Hf6cSS67aNXaQf4WL9AWeHRcDOpBG3uY0fJPOvwfx3+nG6LQlTL9nTyOHHCWt/U6wUzFqFVkXPNt7C6/wAAuq2VFR3vo6LTx7OUVOotY0XDWP7Guz8AbLX6qlkidgljcx3BwLT67V3ZR+mtDxVUZjlbuOFw6zTxB+SRufZWWnWPicTUvqhp91BWRVQJ5u+Cdo2Ojdkbj7pIcO5ebTOi300roZNozBGxzTsIXgcLixWnkytdM+so3hwDmm4IBBG8HMFXLSOR/TBqNHMY43fTuMDu5tub/hLfJbuoOYREQgIiIAiIgCIiAIiIAuS8vWkDhpaQbHSOnd+Rpa31eV1pcI5bZy7STGXyZRs8C97yfRoQlcmhreuTHRt3SVTvZ+rZ3nNx8rDxK0Vdf1IpeboouL284fzG49LLnc8RNNEcyJ1EVVkNwVQqK4KQXBXAKgV4QgtIVpWQqxyAsKtVxVpQkKiqqKAafylaOxwNnA6UbgD+B2R8jb1XM13HS9NzkEsdr4onD0yXDQtVLysGPURxLJ0fkKrcFXU098pYGSAfejcRl4P+C7avnTkuqSzStNbY/nYz3GMuHqwL6LXUyPkIiIQEREAREQBERAEREAXzzytvJ0vODuhpwO7mwfiSvoZcB5ZIcOlXH36WF3ljZ/KhZcmkldz0RHhghaN0MY8mBcNK7hoV5dTwuO0wRk9+ALjfwjXpuWexFE6S1hhiOAB8r97YmmQj8RGQUPPryGdeinaOLgB8VxUJM0uyK5Zt6uC1Km1+pHdbGzvaXD+G6naPTdNL9nUMd2YgD4g5hQ4yXKCnF8MkgrgVjBVbqCS8lWkql1QlACrSvJWaWgizknY3vcL+SgqnXyjb1XPf+FhA83WUqLfCIc4rlm0Ki0+HXxr+pRzOHFoB+ClqDWaGQhj2SQuOwSsLATwD9l1LhJdEKyL7JsLgs7MLnNG5zh5Ehd5JyuOF1wQk79t878d660dnDU9ExqO4jSdCR/3bB4EEH0K+ml818n0eLStEP35d+mN7vkvpRdzGwiIhUIiIAiIgCIiAIiIDxaV0kynZjfc3OFrWi7nOOwALh/K7Wiargl5p8ZNO5hx2zwvuLEbesV0nX+dwfCGmxbHI8ZA5ucxoyPj5rQOU6nd9GhlfYujmbcjLovaWuFuOIt9Vw8j8m3o2KheHf2a1qbo9s9XHG8AsAc9wOdw0ZDzIXXpIrjDcgbMssuFxs8Fynk+nw10Y99kjP4C/+RdZUXfY66dLaYo42RNs0NY0DdZgCh6rW2hbkaqF3c9rh6XC8us+iBWVdHSTSuZTyGQODTbFIGhzGk9oDvJSGtOo2j6KlHM0sZe94YHPBlIyJJBeTY5KaqfJj3yUt1HjeMEG+LRVWbN5nGf2T2Mce3CCLnwXgn1AYTeKpIHB7MRHiCPgtcpYKGWd1M6DNrnNuCWXLb4iMJ7N63Gh0BVwQMrKSR88N344JTd4DXEExP45dU5ZrrOiyCzGWUc431zeJxwSGqmhZ6YuElVzkZGTLOsDlmC4m2zYFs11FaOq2ysbKw3a5ocNxz4jcVKBY3Jt+zaoqKwit1A61aMmqGtZDUmIZ4wL9LZa5aQbCxy33U6o2vqAxrpHGzWtLiTuAzJRNp5RLimsM02HUAXvJVX44WWJ8ST8F7W0WiqU4ZTEXDP657XHvwE/Jeh2gqyshkq55H09M2J0jImdGaQAXaZXW6N8uiNl+xaHPFR0sjWSRYiW43F3TFjcZg3uclshTZOO6UsIwyurg8Qjk6ZS62UB6LamFvDptYPWwU0CyRvsvaR2PaR8CFFatan6NrWSRPo2Aswm7RzZ6V8sTCDtHqvBoLQTKKvqqWnke6BsURc1xxBkji4hoPHDme8LlbQ685OlWo3vGDZIIQwYW9XcNtuwdnYuXcoej2RVQcwWEkeMjdixODrd9gV1Vcy5Tpr1TGe7Tt83Pf8AIBVp+x0vS2Hn5M5gzSLJTG6Tm4ZHANte7rNBzyGV133RGlWVDSWgtLTZ7XCzmntXD+SynJdUyttfoRgnO1rudl3lvkV0XUaoeal4ec3QuxZAdKORoGzserux+THRx8CdTn2b0iIuxjCIiAIiIAiIgCIiA0zW5t6qMH9k0+Ut1retkTZaWVjszI0tjHC2bT5i/kts14pyObnF7AOjceGIgsP6h6rUtKtxzxsPUs23cTmsVuVJnradKVaRzvVimnbNDNzMnRkaXdE5A5H5rsqiy0MlBGQfibbgWkkel/JSUZySVm/kQqUF6Zh0hRMmYY5AbXBBacLmuBu1zXey4HMFYNIVVW+n+i1EYqgCCyWNzYJrjZjY/oO33ILcjkF70VoWSg8orZVGfJo8eg5TKX/RMJOReTDiI8HkrfqLSbo4mQRwtaxgsMTi8naSTYAXJJPisVkAXWzVWT9M5x0tcTDHCASQALknLIXJufUrOAqgK5ozHes5oLXDNeeenDhYi44HPtXrkGassgM50zJhdG6Fj2OaWuAcWGxBB2gjYVoGktBPLwW0heGnoOLoSR5uC3YhLLvXqbIcGeWlrl/RE6Cmq4YXQwxNgdI68ksrmyvG60ccZw7L2LnHM7F7KCibC3C0kkuLnvccT3vPWe873FepUXOy2VjzI6V0xr4C5RrrTTPqpZBE8tuGtIaSCGt3cd66s42Ci524pLbmMxHvcbAeV1WM9jyWlXvWGRGoMPN0bG2tI0mR4O3pm5Hl6hbVq2P+OuNhjkPmIj8VA0rObq3Mb1c79gtf4raNTIMUr5wOi1nNNPEucHO8gGhRBuU1/pNqUK2usG3oiLceQEREAREQBERAEREBhq6ZsjHRPF2uaQfH5rn9VQc3J9Gm2tOKGTYSL5Z8exdGUXrDooVEWEWEjelGe3gew7CuVsNyz2adPdseHwzSq4HC73mO5wW7LYsu4leylfcZbwCFZSOD2AkG9i0g7Ruc0rz6MdYYDtY4s8Bs9LLIel0SKqqKqkoFcFQKoUgqAr2DMKgWRikhlsozVhCzSLEUIRYVaVeVaVBYoqKqooBjmOVlH0ZuHOG18lxf3WkAfA+CzaTls0222sO85D4rI5rYo/wsAuNvcO8n1Udl1wYW0pfJzEIvJISZHn2W3zJ4DsW/aOomwxtiZsaPEnaSe0lR2q+i+ZjxvH1klnP7B7LPC/mppaqobVl8nnam7e9q4QREXYyhERAEREAREQBERAEREBrWl9BSc4ZqbCceb43HCMXvtPE7woCqopYJhzuEGVmIYSSAWWBFztNiF0Ra/rpBeASgZxSB35T0Xeh9FwsqWG0bKNRLcovjgh2nJXLFA64WVZzaVCuCsVwUkFXNuCL2y2qM+hytN8Zd3Zf1UoCq3UNZCeCJdRyvPXc0dv8AVSUMeFobe/asl1QokHJsoVaVUq0qQFRVVkpyUEnj+ivnlbFFhxAGU4rgWbYAG3a5TmjdAyukbJU4A1hxBjTjxO3Fx4DbZV1LguZqji4Rt7mZu9T6LaF3qrTWWZNRfJScUERFoMIREQBERAEREAREQBERAEREAWKqgEjHRu2OY5p7nC3zWVEJXo53Sh0ZMMnXjOF3d7Lu4iy9qm9Y9Cc8OeisJmjLg9vuO+R3LW6SoxCxBBBsQci0jaCFilFxeD1a7FZHK57PUqPeGgk7B4oqqpY8w0lF7/o74WVzNIRH27d4LfiFnsOCxz7OoHcb/wDxPZPotfXxj2x4Xd8FjOkmbsR7mlX0/ZG1o7LfILOnsei2KTEL4S3sO1XIiEBeOvnwtNszsA4uOQCzVE4aCSbZZqS1a0OXOFVM21s4WHaL+24cTuG5SouTwiJzUFuZN6DoeYgji3ht3ficS53qSveiLalhYPKk23lhERSVCIiAIiIAiIgCIiAIiIAiIgCIiAKA1h0EZPr4bCUDMHJsgG4/e4FT6KsoqSwy8JuDyjQKapxXaQWuBs5rsiDwIXoWDXphbUse02JhBvxs4jPjuXjodKA9GTou9D3FYn8Xg9aPyipIlEVAUQgqioiAqsFTUtYLk2/9+K81bpJrOiOk7gPnwVurGKStiMmdg9wG4WabeKL28FmsRcn0TugdBOkIqKhtgDeOM+jpBx4BbWiLbGCisI8myxzeWERFY5hERAEREAREQBERAEREAREQBERAEREARFCab06IjzMID5rbPZYOLz8lWUlFZZeEHN4RDa6x4542tzIgcSN/XFlrj4b5EKbhiIJe9xe92b3HaewcB2JNTh2e/isU/k8nrV/CKiQ0L5GdR1xwdn5FepuliOtE78vSCvkpSFj5tU9o6emXHS59mJ3jkvNNPK/acI4NzPms/Nq9lOTsCe2PSPAyADYFNaqx4auMuyxRSAXyuej/AFSGlDczmVfPCHWzIIN2uGRaeIKtFYeSk3uTj+m9ote0Lp4kiCpsHnJjxkyT/a/sWwrdGSkso8icHB4YREVigREQBERAEREAREQBERAEUXpjWCmpReeZrTuZfE89zBmVqlfyjE5U1I4/emdzQ8GAFx8bKVFsrKyMeWb+i5NW6418n9/HCP3cYJ/U8n4KEnrpn/aVtQ/s557R5NICuq2cnqI9HbKuuiiBMsrGAbcTg34rWNK8oNLHlAHVLv3eTB3yOy8rrl5ZHe+AE8XdM+ZurxMfDgrKs5y1D6JTSOv1ZPibj5nO2CLIgbvrDm7vFu5SWq2mo5WiE2ZKMyPf4vBO0nfvC0+vosX1ke0evYVHslud7Xg5WOFwPEFRZTGawTRqp1Szyu0dfRaHozW6aKzJ2860e2Mngdo2O9Fs9BrHSzZNmaD7rzzZ8nbVgnTOPKPaq1dVnD9/jJRpuLoWA7ljp3g3AN7Hdmsq5GkoGDgqorZXWF0Bcij63TdND15mX90EPd+kZrXNJa4vd0aePCPfk2+DP9V1hVOXCM9upqr+zJvWTTEcEZYQHvcLNZ/MeAHFaxoHWOsgdaGcuzxPEpMkZ8Cbtub7CFCFznvNiZJHbXOOLxcdw7FIQxBjcINyes7if9FurpUEeJqNXK2WeEuDp2h+UOmf0KoGmf8Aeu6Mn7sgFh42Wy0ul6eX7Ooif+F7T81xASnYcx25rEYIjmYm34gWPorOtFY6h9n0Ei4HE9zPs6ieL8E0jR5XUlSaxV8fUr3O+7M0Sg+JzVfGzotQu0dqRcwouUeqjt9JpGyN3ugcWuHaGG9+64W5aA1upKzoxSgP3xv+rf4NO3wVXFo6xsjLhk6iIqlwiIgKE2zK5vrRr0+RzoKF2BjSWvqMje20RA/5vJevlL047LR8TiC9mOdwyIjJIDAeLrHw71z9xFg1os0ZABdYQ7Zmutx8UVBaCXC7nHrPcS5xPaTmqOkJ3q1F1MmQiIgCIiAq1xGxYqqljk2jC7cQsiICNfTSs++3iNqwOkY7JwseBFlMq17A7aAe8XQEbCMOccjm/heQvazSVUMhVS+d/irH6PjPs+RIVv8AZrOLv1KHFPlFlOUeGzM7SdUcjVS+BA+AXjnkJ+0le78T3H0us39mx78R73FZY6OMbGDxzRRS4Qdk3y2eCJ7dkbS4/dHxK9LKR7uu7CODc3eewL2g7hkOAyRSVLY2NaMLBYep7zvVyIgCIiAIiICrXEbCrZoWPsXDC4Zte3ouB3G4VUQG56pa9SRPbSV7sTXG0dRkO5sn+7z4rpq4AWte0xvF2n07l0bkz0+6RjqGd15YRdhO18WQBPEg5eS4zj2jXTbn4s3lERczScc1y/56q74/8gUEiLTHg86z7MIiKSgREQBERAEREAREQBERAEREAREQBERAEREAREQBERAFsWo3/VYv/GlVEVZcF6vsjr6Iiznon//Z\"","const subcribers = {\r\n    'messages-received': [] as MessagesReceivedSubscriberType[],\r\n    'status-changed': [] as StatusChangedSubscriberType[]\r\n}\r\n\r\nlet ws: WebSocket | null = null\r\ntype EventsNamesType = 'messages-received' | 'status-changed'\r\n\r\nconst closeHandler = () => {\r\n    notifySubscribersAboutStatus('pending')\r\n    setTimeout(createChannel, 3000)\r\n}\r\nconst messageHandler = (e: MessageEvent) => {\r\n    const newMessages = JSON.parse(e.data)\r\n    subcribers['messages-received'].forEach(s => s(newMessages))\r\n}\r\nconst openHandler = () => {\r\n    notifySubscribersAboutStatus('ready')\r\n}\r\nconst errorHandler = () => {\r\n    notifySubscribersAboutStatus('error')\r\n    console.error('REFRESH PAGE')\r\n}\r\nconst cleanUp = () => {\r\n    ws?.removeEventListener('close', closeHandler)\r\n    ws?.removeEventListener('message', messageHandler)\r\n    ws?.removeEventListener('open', openHandler)\r\n    ws?.removeEventListener('error', errorHandler)\r\n}\r\nconst notifySubscribersAboutStatus = (status: StatusType) => {\r\n    subcribers['status-changed'].forEach(s => s(status))\r\n}\r\n\r\nfunction createChannel() {\r\n    cleanUp()\r\n    ws?.close()\r\n    ws = new WebSocket('wss://social-network.samuraijs.com/handlers/ChatHandler.ashx')\r\n    notifySubscribersAboutStatus('pending')\r\n    ws.addEventListener('close', closeHandler)\r\n    ws.addEventListener('message', messageHandler)\r\n    ws.addEventListener('open', openHandler)\r\n    ws.addEventListener('error', errorHandler)\r\n}\r\n\r\n\r\nexport const chatAPI = {\r\n    start() {\r\n        createChannel()\r\n    },\r\n    stop() {\r\n        subcribers['messages-received'] = []\r\n        subcribers['status-changed'] = []\r\n        cleanUp()\r\n        ws?.close()\r\n    },\r\n    subscribe(eventName: EventsNamesType, callback: MessagesReceivedSubscriberType | StatusChangedSubscriberType) {\r\n        // @ts-ignore\r\n        subcribers[eventName].push(callback)\r\n        return () => {\r\n            // @ts-ignore\r\n            subcribers[eventName] = subcribers[eventName].filter(s => s !== callback)\r\n        }\r\n    },\r\n    unsubscribe(eventName: EventsNamesType, callback: MessagesReceivedSubscriberType | StatusChangedSubscriberType) {\r\n        // @ts-ignore\r\n        subcribers[eventName] = subcribers[eventName].filter(s => s !== callback)\r\n    },\r\n    sendMessage(message: string) {\r\n        ws?.send(message)\r\n    }\r\n}\r\n\r\ntype MessagesReceivedSubscriberType = (messages: ChatMessageAPIType[]) => void\r\ntype StatusChangedSubscriberType = (status: StatusType) => void\r\n\r\nexport type ChatMessageAPIType = {\r\n    message: string\r\n    photo: string\r\n    userId: number\r\n    userName: string\r\n}\r\nexport type StatusType = 'pending' | 'ready' | 'error'","import {BaseThunkType, InferActionsTypes} from './redux-store'\r\nimport {Dispatch} from 'redux'\r\nimport {FormAction} from 'redux-form/lib/actions'\r\nimport {chatAPI, ChatMessageAPIType, StatusType} from '../API/chat-api'\r\nimport {v1} from 'uuid'\r\n\r\ntype ChatMessageType = ChatMessageAPIType & {id: string}\r\n\r\nlet initialState = {\r\n    messages: [] as ChatMessageType[],\r\n    status: 'pending' as StatusType\r\n}\r\n\r\nconst chatReducer = (state = initialState, action: ActionsType): InitialStateType => {\r\n    switch (action.type) {\r\n        case 'SN/chat/MESSAGES_RECEVIED':\r\n            return {\r\n                ...state,\r\n                messages: [...state.messages, ...action.payload.messages.map( m => ({...m, id: v1() }))]\r\n                    .filter((m, index, array) => index >= array.length - 100)\r\n            }\r\n        case 'SN/chat/STATUS_CHANGED':\r\n            return {\r\n                ...state,\r\n                status: action.payload.status\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport const actions = {\r\n    messagesReceived: (messages: ChatMessageAPIType[]) => ({\r\n        type: 'SN/chat/MESSAGES_RECEVIED', payload: {messages}\r\n    } as const),\r\n    statusChanged: (status: StatusType) => ({\r\n        type: 'SN/chat/STATUS_CHANGED', payload: {status}\r\n    } as const)\r\n}\r\n\r\nlet _newMessageHandler: ((messages: ChatMessageAPIType[]) => void) | null = null\r\nconst newMessageHandlerCreator = (dispatch: Dispatch) => {\r\n    if (_newMessageHandler === null) {\r\n        _newMessageHandler = (messages) => {\r\n            dispatch(actions.messagesReceived(messages))\r\n        }\r\n    }\r\n    return _newMessageHandler\r\n}\r\n\r\nlet _statusChangedHandler: ((status: StatusType) => void) | null = null\r\nconst statusChangedHandlerCreator = (dispatch: Dispatch) => {\r\n    if (_statusChangedHandler === null) {\r\n        _statusChangedHandler = (status) => {\r\n            dispatch(actions.statusChanged(status))\r\n        }\r\n    }\r\n    return _statusChangedHandler\r\n}\r\n\r\nexport const startMessagesListening = (): ThunkType => async (dispatch: Dispatch) => {\r\n    chatAPI.start()\r\n    chatAPI.subscribe('messages-received', newMessageHandlerCreator(dispatch))\r\n    chatAPI.subscribe('status-changed', statusChangedHandlerCreator(dispatch))\r\n\r\n}\r\nexport const stopMessagesListening = (): ThunkType => async (dispatch: Dispatch) => {\r\n    chatAPI.unsubscribe('messages-received', newMessageHandlerCreator(dispatch))\r\n    chatAPI.unsubscribe('status-changed', statusChangedHandlerCreator(dispatch))\r\n    chatAPI.stop()\r\n}\r\n\r\nexport const sendMessage = (message: string): ThunkType => async (dispatch: Dispatch) => {\r\n    chatAPI.sendMessage(message)\r\n}\r\n\r\n\r\nexport default chatReducer\r\n\r\nexport type InitialStateType = typeof initialState;\r\ntype ActionsType = InferActionsTypes<typeof actions>\r\ntype ThunkType = BaseThunkType<ActionsType | FormAction>","import * as React from 'react';\r\nimport {NavLink} from 'react-router-dom';\r\nimport ListItemButton from '@mui/material/ListItemButton';\r\nimport ListItemIcon from '@mui/material/ListItemIcon';\r\nimport ListItemText from '@mui/material/ListItemText';\r\nimport AccountCircleOutlinedIcon from '@mui/icons-material/AccountCircleOutlined';\r\nimport ChatOutlinedIcon from '@mui/icons-material/ChatOutlined';\r\nimport GroupAddOutlinedIcon from '@mui/icons-material/GroupAddOutlined';\r\nimport BallotOutlinedIcon from '@mui/icons-material/BallotOutlined';\r\nimport LibraryMusicOutlinedIcon from '@mui/icons-material/LibraryMusicOutlined';\r\nimport SettingsOutlinedIcon from '@mui/icons-material/SettingsOutlined';\r\nimport PeopleIcon from '@mui/icons-material/People';\r\nimport PhotoCameraOutlinedIcon from '@mui/icons-material/PhotoCameraOutlined';\r\nimport VideoCameraBackOutlinedIcon from '@mui/icons-material/VideoCameraBackOutlined';\r\nimport ChatIcon from '@mui/icons-material/Chat';\r\nimport useClasses from \"../../customHookCSS/useClasses\";\r\nimport {Divider, styled} from \"@mui/material\";\r\n\r\n\r\nconst styles = (theme: any) => ({\r\n    navLink: {\r\n        textDecoration: 'none', color: 'inherit'\r\n    }\r\n});\r\n\r\n\r\nexport default function NavBar() {\r\n    const classes = useClasses(styles);\r\n\r\n    const [selectedIndex, setSelectedIndex] = React.useState(0);\r\n\r\n    const handleListItemClick = (\r\n        event: React.MouseEvent<HTMLDivElement, MouseEvent>,\r\n        index: number,\r\n    ) => {\r\n        setSelectedIndex(index);\r\n    };\r\n\r\n\r\n    return (\r\n        <>\r\n            <NavLink to=\"/\" className={classes.navLink}>\r\n                <ListItemButton\r\n                    selected={selectedIndex === 0}\r\n                    onClick={(event) => handleListItemClick(event, 0)}\r\n                >\r\n                    <StyledListItemIcon>\r\n                        <AccountCircleOutlinedIcon/>\r\n                    </StyledListItemIcon>\r\n                    <ListItemText primary=\"Profile\"/>\r\n                </ListItemButton>\r\n            </NavLink>\r\n            <NavLink to=\"/dialogs\" className={classes.navLink}>\r\n                <ListItemButton\r\n                    selected={selectedIndex === 1}\r\n                    onClick={(event) => handleListItemClick(event, 1)}\r\n                >\r\n                    <StyledListItemIcon>\r\n                        <ChatOutlinedIcon/>\r\n                    </StyledListItemIcon>\r\n                    <ListItemText primary=\"Messanger\"/>\r\n                </ListItemButton>\r\n            </NavLink>\r\n            <NavLink to=\"/users\" className={classes.navLink}>\r\n                <ListItemButton\r\n                    selected={selectedIndex === 2}\r\n                    onClick={(event) => handleListItemClick(event, 2)}\r\n                >\r\n                    <StyledListItemIcon>\r\n                        <GroupAddOutlinedIcon/>\r\n                    </StyledListItemIcon>\r\n                    <ListItemText primary=\"Users\"/>\r\n                </ListItemButton>\r\n            </NavLink>\r\n            <Divider/>\r\n            <NavLink to=\"/chat\" className={classes.navLink}>\r\n                <ListItemButton\r\n                    selected={selectedIndex === 9}\r\n                    onClick={(event) => handleListItemClick(event, 9)}\r\n                >\r\n                    <StyledListItemIcon>\r\n                        <ChatIcon/>\r\n                    </StyledListItemIcon>\r\n                    <ListItemText primary=\"Chat\"/>\r\n                </ListItemButton>\r\n            </NavLink>\r\n            <Divider/>\r\n            <NavLink to=\"/news\" className={classes.navLink}>\r\n                <ListItemButton\r\n                    selected={selectedIndex === 3}\r\n                    onClick={(event) => handleListItemClick(event, 3)}\r\n                >\r\n                    <StyledListItemIcon>\r\n                        <BallotOutlinedIcon/>\r\n                    </StyledListItemIcon>\r\n                    <ListItemText primary=\"News\"/>\r\n                </ListItemButton>\r\n            </NavLink>\r\n            <NavLink to=\"/music\" className={classes.navLink}>\r\n                <ListItemButton\r\n                    selected={selectedIndex === 4}\r\n                    onClick={(event) => handleListItemClick(event, 4)}\r\n                >\r\n                    <StyledListItemIcon>\r\n                        <LibraryMusicOutlinedIcon/>\r\n                    </StyledListItemIcon>\r\n                    <ListItemText primary=\"Music\"/>\r\n                </ListItemButton>\r\n            </NavLink>\r\n            <NavLink to=\"/communities\" className={classes.navLink}>\r\n                <ListItemButton\r\n                    selected={selectedIndex === 5}\r\n                    onClick={(event) => handleListItemClick(event, 5)}\r\n                >\r\n                    <StyledListItemIcon>\r\n                        <PeopleIcon/>\r\n                    </StyledListItemIcon>\r\n                    <ListItemText primary=\"Communities\"/>\r\n                </ListItemButton>\r\n            </NavLink>\r\n            <NavLink to=\"/photos\" className={classes.navLink}>\r\n                <ListItemButton\r\n                    selected={selectedIndex === 6}\r\n                    onClick={(event) => handleListItemClick(event, 6)}\r\n                >\r\n                    <StyledListItemIcon>\r\n                        <PhotoCameraOutlinedIcon/>\r\n                    </StyledListItemIcon>\r\n                    <ListItemText primary=\"Photos\"/>\r\n                </ListItemButton>\r\n            </NavLink>\r\n            <NavLink to=\"/videos\" className={classes.navLink}>\r\n                <ListItemButton\r\n                    selected={selectedIndex === 7}\r\n                    onClick={(event) => handleListItemClick(event, 7)}\r\n                >\r\n                    <StyledListItemIcon>\r\n                        <VideoCameraBackOutlinedIcon/>\r\n                    </StyledListItemIcon>\r\n                    <ListItemText primary=\"Viedos\"/>\r\n                </ListItemButton>\r\n            </NavLink>\r\n            <NavLink to=\"/settings\" className={classes.navLink}>\r\n                <ListItemButton\r\n                    selected={selectedIndex === 8}\r\n                    onClick={(event) => handleListItemClick(event, 8)}\r\n                >\r\n                    <StyledListItemIcon>\r\n                        <SettingsOutlinedIcon/>\r\n                    </StyledListItemIcon>\r\n                    <ListItemText primary=\"Settings\"/>\r\n                </ListItemButton>\r\n            </NavLink>\r\n        </>\r\n    );\r\n}\r\n\r\nconst StyledListItemIcon = styled(ListItemIcon)`\r\n  min-width: 40px;\r\n  color: #90caf9;\r\n`","import React from 'react';\nimport {Grid, Paper} from \"@mui/material\";\nimport Preloader from \"../../../common/Preloader/Preloader\";\n\n\nfunction Music() {\n    return (\n        <Grid item xs={10}>\n            <Paper elevation={2}>\n                <div style={{width: '100%', height: '85vh'}}>\n                    Music in coming soon\n                    <Preloader/>\n                </div>\n            </Paper>\n        </Grid>\n    );\n}\n\nexport default Music;\n","import React from 'react';\nimport {Button, Grid, Paper, Slider, TextField} from \"@mui/material\";\nimport {styled} from '@mui/material/styles';\n\nimport {green} from \"@mui/material/colors\";\nimport useClasses from \"../../../customHookCSS/useClasses\";\n\nconst styles = (theme: any) => ({\n    paper: {\n        marginTop: theme.spacing[8],\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n    },\n    root: {\n        backgroundColor: 'red',\n        color: 'black',\n    },\n    button: {},\n\n});\n\nconst Root = styled('div')(({theme}) => ({\n    padding: theme.spacing(1),\n    [theme.breakpoints.down('md')]: {\n        backgroundColor: theme.palette.secondary.main,\n    },\n    [theme.breakpoints.up('md')]: {\n        backgroundColor: theme.palette.primary.main,\n    },\n    [theme.breakpoints.up('lg')]: {\n        backgroundColor: green[500],\n    },\n\n}));\n\n\nfunction News() {\n\n    const classes = useClasses(styles);\n    return (\n        <Grid item xs={10}>\n            <Paper elevation={2}>\n                <Root style={{width: '100%', height: '85vh'}}>\n                    <Grid container className={classes.root} item direction={\"row\"} flexWrap={\"nowrap\"}>\n                        <TextField/>\n                        <Button className={classes.button} variant={\"contained\"} color={\"primary\"}>Add</Button>\n                    </Grid>\n                </Root>\n            </Paper>\n        </Grid>\n    );\n}\n\nexport default News;\n","import React from 'react';\nimport s from './Settings.module.css';\nimport SettingsOutlinedIcon from '@mui/icons-material/SettingsOutlined';\nimport CallMadeOutlinedIcon from '@mui/icons-material/CallMadeOutlined';\nimport LockOutlinedIcon from '@mui/icons-material/LockOutlined';\nimport NotificationsActiveOutlinedIcon from '@mui/icons-material/NotificationsActiveOutlined';\nimport AutorenewOutlinedIcon from '@mui/icons-material/AutorenewOutlined';\nimport SecurityOutlinedIcon from '@mui/icons-material/SecurityOutlined';\nimport FingerprintOutlinedIcon from '@mui/icons-material/FingerprintOutlined';\nimport BlockOutlinedIcon from '@mui/icons-material/BlockOutlined';\nimport HighlightOffOutlinedIcon from '@mui/icons-material/HighlightOffOutlined';\nimport {Grid, Paper} from \"@mui/material\";\n\n\nfunction Settings() {\n    return (\n        <Grid item xs={10}>\n            <Paper elevation={4}>\n                <div className={s.settingsWrap}>\n                    <div className={s.settingListMenu}>\n                        <a href=\"#/\"> <SettingsOutlinedIcon style={{paddingRight: '10px'}}/> Account Setting</a>\n                        <a href=\"#/\"> <CallMadeOutlinedIcon style={{paddingRight: '10px'}}/> Status</a>\n                        <a href=\"#/\"> <LockOutlinedIcon style={{paddingRight: '10px'}}/> Change Password</a>\n                        <a href=\"#/\"> <NotificationsActiveOutlinedIcon style={{paddingRight: '10px'}}/> Notifications</a>\n                        <a href=\"#/\"> <AutorenewOutlinedIcon style={{paddingRight: '10px'}}/> Requests</a>\n                        <a href=\"#/\"> <SecurityOutlinedIcon style={{paddingRight: '10px'}}/>Security and Login</a>\n                        <a href=\"#/\"> <FingerprintOutlinedIcon style={{paddingRight: '10px'}}/>Privacy</a>\n                        <a href=\"#/\"> <BlockOutlinedIcon style={{paddingRight: '10px'}}/>Blocking</a>\n                        <a href=\"#/\"> <HighlightOffOutlinedIcon style={{paddingRight: '10px'}}/>Deactivate Account</a>\n                    </div>\n                    <div className={s.settingMenu}>Item Settings</div>\n                </div>\n            </Paper>\n        </Grid>\n    );\n}\n\nexport default Settings;\n","import React, {useState} from 'react';\r\nimport {\r\n    Divider,\r\n    Grid, IconButton,\r\n    List,\r\n    ListItem,\r\n    ListItemButton,\r\n    ListItemIcon,\r\n    ListItemText,\r\n    ListProps, Paper,\r\n    styled\r\n} from \"@mui/material\";\r\nimport ForumOutlinedIcon from '@mui/icons-material/ForumOutlined';\r\nimport MarkEmailUnreadOutlinedIcon from '@mui/icons-material/MarkEmailUnreadOutlined';\r\nimport {Delete} from \"@mui/icons-material\";\r\nimport {NavLink} from 'react-router-dom';\r\nimport useClasses from \"../../../customHookCSS/useClasses\";\r\n\r\nconst CustomListItem = styled(ListItem)<ListProps>(({theme}) => ({\r\n    '& .MuiListItemSecondaryAction-root': {\r\n        visibility: 'hidden'\r\n    },\r\n    '&:hover': {\r\n        '.MuiTypography-root': {color: theme.palette.primary.main},\r\n        '.MuiListItemSecondaryAction-root': {\r\n            visibility: 'visible'\r\n        }\r\n    }\r\n}))\r\nconst styles = (theme: any) => ({\r\n    navLink: {\r\n        textDecoration: 'none', color: 'inherit'\r\n    },\r\n    rightDialogMenu:{\r\n        [theme.breakpoints.down(\"md\")]: {\r\n            display: 'none'\r\n        },\r\n        [theme.breakpoints.up('md')]: {\r\n            display: 'block',\r\n            width:'300px'\r\n        }\r\n    }\r\n});\r\n\r\n\r\nfunction RightDialogMenu() {\r\n\r\n    const classes = useClasses(styles);\r\n\r\n    const [selectedIndex, setSelectedIndex] = React.useState(0);\r\n    const [open, setClose] = useState(true);\r\n\r\n    const handleListItemClick = (event: React.MouseEvent<HTMLDivElement, MouseEvent>, index: number,) => {\r\n        setSelectedIndex(index);\r\n    };\r\n\r\n\r\n    return (\r\n        <Grid item lg={3} className={classes.rightDialogMenu}>\r\n            <Paper elevation={4}>\r\n                <Grid container item direction={\"column\"} wrap={\"nowrap\"}>\r\n                    <List>\r\n                        <NavLink to=\"/dialogs\" className={classes.navLink}>\r\n                            <ListItem disablePadding>\r\n                                <ListItemButton selected={selectedIndex === 0}\r\n                                                onClick={(event) => handleListItemClick(event, 0)}>\r\n                                    <ListItemIcon>\r\n                                        <ForumOutlinedIcon color={\"primary\"}/>\r\n                                    </ListItemIcon>\r\n                                    <ListItemText primary=\"All chats\"/>\r\n                                </ListItemButton>\r\n                            </ListItem>\r\n                        </NavLink>\r\n                        <ListItem disablePadding>\r\n                            <ListItemButton selected={selectedIndex === 1}\r\n                                            onClick={(event) => handleListItemClick(event, 1)}>\r\n                                <ListItemIcon>\r\n                                    <MarkEmailUnreadOutlinedIcon color={\"primary\"}/>\r\n                                </ListItemIcon>\r\n                                <ListItemText primary=\"Unread\"/>\r\n                            </ListItemButton>\r\n                        </ListItem>\r\n                        {open && <NavLink exact to=\"/dialogs/chat\" className={classes.navLink}>\r\n                            <Divider/>\r\n                            <CustomListItem disablePadding\r\n                                            secondaryAction={\r\n                                                <IconButton aria-label=\"delete\" edge={\"end\"}\r\n                                                            onClick={() => setClose(!open)}>\r\n                                                    <Delete color={\"secondary\"} fontSize={\"small\"}/>\r\n                                                </IconButton>}>\r\n\r\n\r\n                                <ListItemButton selected={selectedIndex === 2}\r\n                                                onClick={(event) => handleListItemClick(event, 2)}>\r\n                                    <ListItemText primary=\"Tony Stark\"/>\r\n                                </ListItemButton>\r\n                            </CustomListItem>\r\n                        </NavLink>}\r\n\r\n                    </List>\r\n\r\n                </Grid>\r\n            </Paper>\r\n        </Grid>\r\n    )\r\n}\r\n\r\nexport default RightDialogMenu","import React from 'react';\nimport {Grid, Paper} from \"@mui/material\";\n\n\nfunction Communities() {\n    return (\n        <Grid item xs={10}>\n            <Paper elevation={2}>\n                <div style={{width: '100%', height: '85vh'}}>Communities in coming soon</div>\n            </Paper>\n        </Grid>\n\n    );\n}\n\nexport default Communities;\n","import React from 'react';\nimport {Grid, Paper} from \"@mui/material\";\n\n\nfunction Photos() {\n    return (\n        <Grid item xs={10}>\n            <Paper elevation={2}>\n                <div style={{width: '100%', height: '85vh'}}>Photos in coming soon</div>\n            </Paper>\n        </Grid>\n    );\n}\n\nexport default Photos;\n","import React from 'react';\nimport {Grid, Paper} from \"@mui/material\";\n\n\nfunction Videos() {\n    return (\n        <Grid item xs={10}>\n            <Paper elevation={2}>\n                <div style={{width: '100%', height: '85vh'}}>Videos in coming soon</div>\n            </Paper>\n        </Grid>\n    );\n}\n\nexport default Videos;\n","import React, {useState} from 'react';\r\nimport {currentTime} from \"../../Profile/RightColumn/Posts/Post/Post\";\r\nimport {styled} from \"@mui/material/styles\";\r\nimport {Grid, IconButton, TextField} from \"@mui/material\";\r\nimport CheckCircleIcon from '@mui/icons-material/CheckCircle';\r\nimport EditOutlinedIcon from '@mui/icons-material/EditOutlined';\r\nimport {EditMessageAC, MessageType} from \"../../../redux/dialogs-reducer\";\r\nimport {useDispatch} from \"react-redux\";\r\n\r\n\r\ntype SentMessagePropsType = {\r\n    editMode: boolean\r\n    setSelectedMessages: (messID: string) => void\r\n}\r\n\r\nfunction SentMessage(props: MessageType & SentMessagePropsType) {\r\n\r\n    const SentMessageContainer = styled(Grid)`\r\n      display: flex;\r\n      flex-direction: row;\r\n      justify-content: flex-end;\r\n      padding: 10px 20px;\r\n      align-items: flex-end;\r\n\r\n      img {\r\n        width: 50px;\r\n        height: 50px;\r\n        border-radius: 25px;\r\n        margin-left: 13px;\r\n      }\r\n    ;\r\n\r\n      p {\r\n        border: 1px solid #3f51b5;\r\n        border: ${props.editMode ? '1px solid #f50057' : '1px solid #3f51b5'};\r\n        color: #686868;\r\n        width: auto;\r\n        padding: 10px 15px 0 15px;\r\n        border-radius: 15px;\r\n        word-break: break-all;\r\n        margin-left: 10px;\r\n      }\r\n    ;\r\n\r\n      div {\r\n        display: flex;\r\n        flex-direction: row;\r\n        justify-content: flex-end;\r\n        font-size: 14px;\r\n        padding-bottom: 3px;\r\n      }\r\n    ;\r\n\r\n      & svg {\r\n        visibility: ${props.editMode ? 'visible' : 'hidden'};\r\n        margin-left: 10px;\r\n        //margin-right: auto;\r\n        position: relative;\r\n        bottom: 50%;\r\n      }\r\n    ;\r\n\r\n      :hover {\r\n        cursor: pointer;\r\n\r\n        & svg {\r\n          opacity: ${props.editMode ? '1' : '0.5'};\r\n          visibility: visible;\r\n          margin-left: 10px;\r\n          //margin-right: auto;\r\n        }\r\n      ;;\r\n      }\r\n    ;\r\n    `;\r\n\r\n    const dispatch = useDispatch()\r\n    const [editMode, setEditMode] = useState(false)\r\n    const [newMessageText, setNewMessageText] = useState(props.message)\r\n\r\n    const activateEditMode = () => {\r\n        setEditMode(true);\r\n        setNewMessageText(props.message);\r\n    }\r\n    const activateViewMode = () => {\r\n        setEditMode(false);\r\n        dispatch(EditMessageAC(props.id, newMessageText))\r\n    }\r\n\r\n    const selectMessage = () => {\r\n        props.setSelectedMessages(props.id)\r\n    }\r\n\r\n    const editMessageText = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        setNewMessageText(e.currentTarget.value)\r\n    }\r\n\r\n    return (\r\n        <SentMessageContainer key={props.id}\r\n                              onClick={selectMessage}>\r\n            <CheckCircleIcon color={\"primary\"}/>\r\n            {!editMode && <EditOutlinedIcon color={\"primary\"} onClick={activateEditMode}/>}\r\n\r\n            {!editMode\r\n                ? <p>{props.message}\r\n                    <div>\r\n                        {currentTime()}\r\n                        {props.isEdit && ' (edit)'}\r\n                    </div>\r\n                </p>\r\n                : <TextField id=\"standard-basic\"\r\n                             label=\"Edit message\"\r\n                             variant=\"standard\"\r\n                             fullWidth\r\n                             onChange={editMessageText}\r\n                             value={newMessageText}\r\n                             onBlur={activateViewMode}\r\n                             autoFocus/>}\r\n            <img src=\"https://www.seoclerk.com/pics/319222-1IvI0s1421931178.png\" alt=\"userAvatar\"/>\r\n        </SentMessageContainer>\r\n    );\r\n}\r\n\r\nexport default SentMessage;\r\n\r\n","import React from 'react';\r\nimport {currentTime} from \"../../Profile/RightColumn/Posts/Post/Post\";\r\nimport {styled} from \"@mui/material/styles\";\r\nimport {Grid} from \"@mui/material\";\r\nimport CheckCircleIcon from \"@mui/icons-material/CheckCircle\";\r\n\r\n\r\nconst ReceivedMessageContainer = styled(Grid)`\r\n  display: flex;\r\n  flex-direction: row;\r\n  padding: 10px 20px;\r\n  align-items: flex-end;\r\n  img {\r\n    width: 50px;\r\n    height: 50px;\r\n    border-radius: 25px;\r\n    margin-right: 13px;\r\n  };\r\n  p{\r\n    border: 1px solid #3f51b5;\r\n    margin-right: 10px;\r\n    color: #686868;\r\n    width: auto;\r\n    padding: 10px 15px 0 15px;\r\n    border-radius: 15px;\r\n  };\r\n  div{\r\n    display: flex;\r\n    flex-direction: row;\r\n    justify-content: flex-end;\r\n    font-size: 14px;\r\n    padding-bottom: 3px;\r\n  };\r\n  & svg {\r\n    visibility: hidden;\r\n    margin-right: 10px;\r\n    margin-left: auto;\r\n    position: relative;\r\n    bottom: 50%;\r\n  } ;\r\n  :hover {\r\n    cursor: pointer;\r\n    & svg {\r\n      visibility: visible;\r\n      margin-right: 10px;\r\n      margin-left: auto;\r\n      opacity: 0.6;\r\n    };\r\n  } ;\r\n,\r\n`;\r\n\r\n\r\nfunction ReceivedMessage() {\r\n\r\n    return (\r\n        <ReceivedMessageContainer >\r\n            <img src=\"https://avatarfiles.alphacoders.com/169/169302.jpg\" alt=\"userAvatar\"/>\r\n            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ea illum, molestias quibusdam rem repellat sapiente? Amet consequatur corporis cum, et ipsam magni, nemo obcaecati quos saepe, sed sint tempora totam!\r\n                <div>{currentTime()}</div>\r\n            </p>\r\n            <CheckCircleIcon color={\"primary\"}/>\r\n        </ReceivedMessageContainer>\r\n    );\r\n}\r\n\r\nexport default ReceivedMessage;","import React from 'react';\r\nimport {\r\n    Avatar, Button,\r\n    Grid,\r\n    IconButton,\r\n    Typography\r\n} from \"@mui/material\";\r\nimport {useHistory} from 'react-router-dom';\r\n\r\nimport MoreHorizIcon from \"@mui/icons-material/MoreHoriz\";\r\nimport ArrowBackOutlinedIcon from \"@mui/icons-material/ArrowBackOutlined\";\r\nimport CallIcon from \"@mui/icons-material/Call\";\r\nimport ClearIcon from \"@mui/icons-material/Clear\";\r\n\r\ntype ChatHeaderPropsType = {\r\n    editMode: boolean\r\n    selectedMessageCount: number\r\n    setEditMode: () => void\r\n    deleteMessages: () => void\r\n}\r\n\r\nfunction ChatHeader(props: ChatHeaderPropsType) {\r\n\r\n    let history = useHistory()\r\n\r\n    return (\r\n        <Grid container item direction={\"row\"} justifyContent={\"space-between\"} alignItems={\"center\"}\r\n              flexWrap={'nowrap'}\r\n              style={{paddingLeft: '15px', paddingRight: '15px', paddingBottom: '5px', paddingTop: '5px'}}>\r\n            {props.editMode\r\n                ? <Grid item display={\"flex\"} flexDirection={\"row\"} alignItems={\"center\"} style={{padding:'2px'}}>\r\n                    <Typography variant={\"subtitle2\"}><b>{props.selectedMessageCount} messages</b></Typography>\r\n                    <IconButton>\r\n                        <ClearIcon onClick={() => props.setEditMode()} fontSize={\"small\"} color={\"secondary\"}/>\r\n                    </IconButton>\r\n                </Grid>\r\n                : <> <Grid item>\r\n                    <Button variant={\"text\"} startIcon={<ArrowBackOutlinedIcon/>} onClick={() => {\r\n                        history.goBack()\r\n                    }}>back</Button>\r\n                </Grid>\r\n                    <Grid item>\r\n                        <Typography variant={\"h6\"}>Tony Stark</Typography>\r\n                    </Grid>\r\n                </>}\r\n\r\n            <Grid item>\r\n                {props.editMode ? <Grid item>\r\n                        <Button variant={\"contained\"} color={\"secondary\"} onClick={props.deleteMessages} size={\"small\"}>Delete</Button>\r\n                    </Grid> :\r\n                    <Grid container item direction={\"row\"} justifyContent={\"space-between\"} alignItems={\"center\"}>\r\n                        <Grid item>\r\n                            <IconButton aria-label=\"delete\" color=\"primary\">\r\n                                <CallIcon/>\r\n                            </IconButton>\r\n                        </Grid>\r\n                        <Grid item>\r\n                            <IconButton aria-label=\"delete\" color=\"primary\">\r\n                                <MoreHorizIcon/>\r\n                            </IconButton>\r\n                        </Grid>\r\n                        <Grid item>\r\n                            <Avatar\r\n                                alt=\"Remy Sharp\"\r\n                                src=\"https://www.seoclerk.com/pics/319222-1IvI0s1421931178.png\"\r\n                                sx={{width: 33, height: 33}}\r\n                            />\r\n                        </Grid>\r\n                    </Grid>}\r\n            </Grid>\r\n        </Grid>\r\n    )\r\n}\r\n\r\nexport default ChatHeader\r\n\r\n","import React, {useEffect, useRef, useState} from 'react';\r\nimport SentMessage from \"./Messages/SentMessage\";\r\nimport {Alert, Button, Divider, Grid, Paper, Snackbar, TextField} from \"@mui/material\";\r\nimport {Send} from \"@mui/icons-material\";\r\nimport {styled} from \"@mui/material/styles\";\r\nimport {DialogsPropsType} from \"./ChatContainer\";\r\nimport ReceivedMessage from \"./Messages/ReceivedMessage\";\r\nimport ChatHeader from \"./Headers/ChatHeader\";\r\nimport  {Field, reduxForm} from \"redux-form\";\r\nimport {maxLengthCreator, requiredField} from \"../../utils/validators/validators\";\r\n\r\n\r\nfunction Chat(props: DialogsPropsType) {\r\n\r\n    const messageArea = useRef<HTMLDivElement>(null);\r\n    const messagesEndRef = useRef<HTMLDivElement>(null)\r\n\r\n    const [openAlert, setOpenAlert] = useState(false)\r\n    const [selectedMessages, setSelectedMessages] = useState<string[]>([])\r\n\r\n\r\n    const scrollToBottom = () => {\r\n        messagesEndRef.current!.scrollIntoView({behavior: \"auto\"})\r\n    }\r\n    useEffect(scrollToBottom, [props.dialogsPage.messages]);\r\n\r\n\r\n\r\n\r\n    // const onKeyPressHandler = (e: React.KeyboardEvent<HTMLInputElement>) => {\r\n    //     if (e.charCode === 13 && props.dialogsPage.newMessText.trim() !== '') {\r\n    //         e.preventDefault()\r\n    //         props.sendMessage(props.dialogsPage.newMessText)\r\n    //     } else if (props.dialogsPage.newMessText.trim() === '' && e.charCode === 13) {\r\n    //         e.preventDefault()\r\n    //     }\r\n    // }\r\n\r\n    //todo add types\r\n    const addNewMessage = (values: any) => {\r\n        if(values.newMessageBody){\r\n            props.sendMessage(values.newMessageBody)\r\n            values.newMessageBody = ''\r\n        } else return\r\n    }\r\n\r\n    const handleSelectMessage = (messID: string) => {\r\n        if (selectedMessages.includes(messID)) {\r\n            setSelectedMessages(selectedMessages.filter(m => m !== messID));\r\n        } else {\r\n            setSelectedMessages([...selectedMessages, messID]);\r\n        }\r\n    }\r\n    const deleteMessages = () => {\r\n        props.deleteMessages(props.dialogsPage.messages.map(m => m.id).filter(x => selectedMessages.includes(x)))\r\n        setOpenAlert(true)\r\n        setSelectedMessages([])\r\n    }\r\n    const handlerEditMode = () => {\r\n        setSelectedMessages([]);\r\n    }\r\n\r\n\r\n    let messagesElements = props.dialogsPage.messages\r\n        .map(m => <SentMessage key={m.id}\r\n                               message={m.message}\r\n                               id={m.id}\r\n                               isEdit={m.isEdit}\r\n                               editMode={selectedMessages.includes(m.id)}\r\n                               setSelectedMessages={handleSelectMessage}\r\n            />\r\n        )\r\n\r\n\r\n    return (\r\n        <Grid item xs={12} md={12} lg={9}>\r\n            <Paper elevation={2}>\r\n                <RootContainer container item>\r\n                    <ChatHeader\r\n                        editMode={!!selectedMessages.length}\r\n                        setEditMode={handlerEditMode}\r\n                        selectedMessageCount={selectedMessages.length}\r\n                        deleteMessages={deleteMessages}\r\n                    />\r\n                    <Divider/>\r\n                    <MessagesArea ref={messageArea}>\r\n                        <ReceivedMessage/>\r\n                        <ReceivedMessage/>\r\n                        {messagesElements}\r\n                        <div ref={messagesEndRef}/>\r\n                    </MessagesArea>\r\n                    <Divider/>\r\n                    <InputArea item>\r\n                        <AddMessageFormRedux onSubmit={addNewMessage}/>\r\n                    </InputArea>\r\n                    <Snackbar open={openAlert} autoHideDuration={6000}\r\n                              style={{position: 'absolute', bottom: 10, left: 10}} onClose={() => setOpenAlert(false)}>\r\n                        <Alert severity=\"success\">\r\n                            Messages was deleted!\r\n                        </Alert>\r\n                    </Snackbar>\r\n                </RootContainer>\r\n            </Paper>\r\n        </Grid>\r\n    );\r\n}\r\n\r\nexport default Chat;\r\n\r\n\r\nconst MessagesArea = styled('div')(({theme}) => ({\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    height: '75vh',\r\n\r\n    overflow: 'auto',\r\n    overflowY: 'visible',\r\n    '&::-webkit-scrollbar': {\r\n        width: '5px'\r\n    },\r\n    '&::-webkit-scrollbar-thumb': {\r\n        background: '#3f51b5',\r\n        borderRadius: '5px'\r\n    },\r\n    'h3,p': {\r\n        margin: 0,\r\n        padding: '10px 15px 0 15px'\r\n    }\r\n}));\r\nconst RootContainer = styled(Grid)({\r\n    height: '90vh ',\r\n    flexDirection: 'column',\r\n    flexWrap: 'nowrap'\r\n});\r\nconst InputArea = styled(Grid)({\r\n    padding: '15px 15px 15px 15px',\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n    flexWrap: 'nowrap',\r\n});\r\n\r\n\r\n//@ts-ignore\r\nconst renderTextField = ({label, input, meta: {touched, invalid, error}, ...custom}) => (\r\n    <TextField\r\n        label={'Write a message'}\r\n        error={touched && invalid}\r\n        helperText={touched && error}\r\n        fullWidth\r\n        multiline\r\n        autoFocus\r\n        maxRows={4}\r\n        size={\"small\"}\r\n        autoComplete={'off'}\r\n        id=\"outlined-basic\"\r\n        variant=\"outlined\"\r\n        style={{marginRight: '15px'}}\r\n        {...input}\r\n        {...custom}\r\n    />\r\n)\r\n\r\nlet maxLength100 = maxLengthCreator(100)\r\nconst AddMessageForm = (props: any) => {\r\n    return(\r\n        <form onSubmit={props.handleSubmit} style={{display:'flex', flexDirection:'row', width:'100%'}}>\r\n            <Field component={renderTextField}\r\n                   name={'newMessageBody'}\r\n                   validate={[requiredField, maxLength100]}\r\n            />\r\n            <Button variant=\"contained\"\r\n                    type={\"submit\"}\r\n                    endIcon={<Send/>}>\r\n                Send\r\n            </Button>\r\n        </form>\r\n\r\n    )\r\n}\r\n\r\nconst AddMessageFormRedux = reduxForm({form: 'dialogAddMessageForm'})(AddMessageForm)","import {\r\n    DeleteMessagesCreator,\r\n    DialogPageType,\r\n    sendMessageCreator,\r\n} from \"../../redux/dialogs-reducer\";\r\n\r\nimport {connect} from \"react-redux\";\r\nimport {AppStateType} from \"../../redux/redux-store\";\r\n\r\nimport { Dispatch } from 'redux';\r\nimport Chat from \"./Chat\";\r\n\r\ntype mapStateToPropsType = {\r\n    dialogsPage: DialogPageType\r\n}\r\n\r\ntype mapDispatchPropsType = {\r\n    sendMessage: (newMessText: string) => void\r\n    deleteMessages:(selectedMess: string[]) => void\r\n}\r\n\r\nexport type  DialogsPropsType = mapStateToPropsType & mapDispatchPropsType\r\n\r\nconst mapStateToProps = (state: AppStateType) : mapStateToPropsType => {\r\n    return {\r\n        dialogsPage: state.dialogPage\r\n    }\r\n}\r\nconst mapDispatchToProps = (dispatch: Dispatch):mapDispatchPropsType => {\r\n    return {\r\n        sendMessage: (newMessText: string) => {\r\n           dispatch(sendMessageCreator(newMessText))\r\n        },\r\n        deleteMessages: (selectedMess: string[]) => {\r\n            dispatch(DeleteMessagesCreator(selectedMess))\r\n        }\r\n    }\r\n}\r\n\r\nconst ChatContainer = connect(mapStateToProps, mapDispatchToProps)(Chat)\r\n\r\nexport default ChatContainer;","import * as React from 'react';\r\nimport AppBar from '@mui/material/AppBar';\r\nimport Box from '@mui/material/Box';\r\nimport IconButton from '@mui/material/IconButton';\r\nimport Typography from '@mui/material/Typography';\r\nimport Badge from '@mui/material/Badge';\r\nimport MenuItem from '@mui/material/MenuItem';\r\nimport Menu from '@mui/material/Menu';\r\nimport MenuIcon from '@mui/icons-material/Menu';\r\nimport AccountCircle from '@mui/icons-material/AccountCircle';\r\nimport MailIcon from '@mui/icons-material/Mail';\r\nimport NotificationsIcon from '@mui/icons-material/Notifications';\r\nimport MoreIcon from '@mui/icons-material/MoreVert';\r\nimport {Avatar, Button, Divider, Drawer, Grid, ListItemIcon, styled} from \"@mui/material\";\r\nimport {Logout, Settings} from \"@mui/icons-material\";\r\nimport NavBar from \"../NavBar/NavBar\";\r\nimport {NavLink, Redirect} from 'react-router-dom';\r\nimport useClasses from \"../../customHookCSS/useClasses\";\r\nimport {HeaderPropsType} from \"./HeaderContainer\";\r\nimport {useSelector} from \"react-redux\";\r\nimport {AppStateType} from \"../../redux/redux-store\";\r\n\r\n\r\nconst MainHeaderContainer = styled('div')(({theme}) => ({\r\n    margin: 'auto',\r\n    width: '70%',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    flexDirection: 'row',\r\n    color: 'white',\r\n    [theme.breakpoints.down('md')]: {\r\n        width: '90%',\r\n    },\r\n    [theme.breakpoints.up('md')]: {\r\n        width: '90%',\r\n    },\r\n    [theme.breakpoints.up('lg')]: {\r\n        width: '80%',\r\n    },\r\n}));\r\nconst styles = (theme: any) => ({\r\n    navLink: {\r\n        textDecoration: 'none', color: 'inherit'\r\n    }\r\n});\r\n\r\ntype Anchor = \"top\" | \"left\" | \"bottom\" | \"right\";\r\n\r\n\r\nexport default function Header(props: HeaderPropsType) {\r\n\r\n    const isAuth = useSelector<AppStateType, boolean>(state => state.auth.isAuth)\r\n\r\n\r\n    const classes = useClasses(styles);\r\n\r\n    const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null);\r\n    const [mobileMoreAnchorEl, setMobileMoreAnchorEl] = React.useState<null | HTMLElement>(null);\r\n    const [state, setState] = React.useState(false);\r\n\r\n    const toggleDrawer = (open: boolean) => (event: React.KeyboardEvent | React.MouseEvent | React.FocusEvent<HTMLDivElement>) => {\r\n        setState(!state)\r\n    }\r\n\r\n\r\n\r\n    const logout = () => {\r\n        if(isAuth) {\r\n            props.logout()\r\n        }\r\n        return <Redirect to={'/login'}/>\r\n    }\r\n\r\n    const list = (anchor: Anchor) => (\r\n        <Box\r\n            style={{marginTop: '20px', width: '250px'}}\r\n            role=\"presentation\"\r\n            onKeyDown={toggleDrawer(false)}\r\n            onClick={toggleDrawer(false)}\r\n        >\r\n            <Grid container item direction={\"row\"} flexWrap={\"nowrap\"} alignItems={\"center\"}>\r\n                <Avatar\r\n                    alt=\"Remy Sharp\"\r\n                    src=\"https://www.seoclerk.com/pics/319222-1IvI0s1421931178.png\"\r\n                    sx={{width: 60, height: 60, margin: '10px'}}\r\n\r\n                />\r\n                <Grid container item direction={\"column\"} flexWrap={\"wrap\"}>\r\n                    <Typography variant={\"subtitle1\"} style={{padding: 0}}>{props.login}</Typography>\r\n                </Grid>\r\n            </Grid>\r\n            <Divider/>\r\n            <NavBar/>\r\n        </Box>\r\n    );\r\n\r\n    const isMobileMenuOpen = Boolean(mobileMoreAnchorEl);\r\n\r\n    const handleProfileMenuOpen = (event: React.MouseEvent<HTMLElement>) => {\r\n        setAnchorEl(event.currentTarget);\r\n    };\r\n\r\n    const handleMobileMenuClose = () => {\r\n        setMobileMoreAnchorEl(null);\r\n    };\r\n\r\n    const handleMobileMenuOpen = (event: React.MouseEvent<HTMLElement>) => {\r\n        setMobileMoreAnchorEl(event.currentTarget);\r\n    };\r\n\r\n\r\n    const open = Boolean(anchorEl);\r\n    const handleClose = () => {\r\n        setAnchorEl(null);\r\n    };\r\n\r\n    const menuId = 'primary-search-account-menu';\r\n    const renderMenu = (\r\n        <Menu\r\n            anchorEl={anchorEl}\r\n            open={open}\r\n            onClose={handleClose}\r\n            onClick={handleClose}\r\n            PaperProps={{\r\n                elevation: 0,\r\n                sx: {\r\n                    overflow: 'visible',\r\n                    filter: 'drop-shadow(0px 2px 8px rgba(0,0,0,0.32))',\r\n                    mt: 1.5,\r\n                    '& .MuiAvatar-root': {\r\n                        width: 40,\r\n                        height: 40,\r\n                        ml: -0.5,\r\n                        mr: 1,\r\n                    },\r\n                    '&:before': {\r\n                        content: '\"\"',\r\n                        display: 'block',\r\n                        position: 'absolute',\r\n                        top: 0,\r\n                        right: 14,\r\n                        width: 10,\r\n                        height: 10,\r\n                        bgcolor: 'background.paper',\r\n                        transform: 'translateY(-50%) rotate(45deg)',\r\n                        zIndex: 0,\r\n                    },\r\n                },\r\n            }}\r\n            transformOrigin={{horizontal: 'right', vertical: 'top'}}\r\n            anchorOrigin={{horizontal: 'right', vertical: 'bottom'}}\r\n        >\r\n            <NavLink to=\"/\" className={classes.navLink}>\r\n                <MenuItem style={{display:'flex', flexDirection: 'row'}}>\r\n                    <Avatar/>\r\n                    <Grid item style={{display:'flex', flexDirection: 'column'}}>\r\n                        {props.login}\r\n                        <Typography variant={\"caption\"}>Go to Profile</Typography>\r\n                    </Grid>\r\n                </MenuItem>\r\n            </NavLink>\r\n            <Divider/>\r\n            <MenuItem>\r\n                <ListItemIcon>\r\n                    <Settings fontSize=\"small\"/>\r\n                </ListItemIcon>\r\n                Settings\r\n            </MenuItem>\r\n            <MenuItem onClick={logout}>\r\n                <ListItemIcon>\r\n                    <Logout fontSize=\"small\" />\r\n                </ListItemIcon>\r\n                Logout\r\n            </MenuItem>\r\n        </Menu>\r\n    );\r\n\r\n    const mobileMenuId = 'primary-search-account-menu-mobile';\r\n    const renderMobileMenu = (\r\n        <Menu\r\n            anchorEl={mobileMoreAnchorEl}\r\n            anchorOrigin={{\r\n                vertical: 'top',\r\n                horizontal: 'right',\r\n            }}\r\n            id={mobileMenuId}\r\n            keepMounted\r\n            transformOrigin={{\r\n                vertical: 'top',\r\n                horizontal: 'right',\r\n            }}\r\n            open={isMobileMenuOpen}\r\n            onClose={handleMobileMenuClose}\r\n        >\r\n            <MenuItem>\r\n                <IconButton size=\"large\" aria-label=\"show 4 new mails\" color=\"inherit\">\r\n                    <Badge badgeContent={4} color=\"error\">\r\n                        <MailIcon/>\r\n                    </Badge>\r\n                </IconButton>\r\n                <p>Messages</p>\r\n            </MenuItem>\r\n            <MenuItem>\r\n                <IconButton\r\n                    size=\"large\"\r\n                    aria-label=\"show 17 new notifications\"\r\n                    color=\"inherit\"\r\n                >\r\n                    <Badge badgeContent={17} color=\"error\">\r\n                        <NotificationsIcon/>\r\n                    </Badge>\r\n                </IconButton>\r\n                <p>Notifications</p>\r\n            </MenuItem>\r\n            <MenuItem onClick={handleProfileMenuOpen}>\r\n                <IconButton\r\n                    size=\"large\"\r\n                    aria-label=\"account of current user\"\r\n                    aria-controls=\"primary-search-account-menu\"\r\n                    aria-haspopup=\"true\"\r\n                    color=\"inherit\"\r\n                >\r\n                    <AccountCircle/>\r\n                </IconButton>\r\n                <p>Profile</p>\r\n            </MenuItem>\r\n            <Divider/>\r\n        </Menu>\r\n    );\r\n\r\n\r\n    return (\r\n        <Box sx={{flexGrow: 1}}>\r\n            <AppBar position=\"static\" style={{boxSizing: 'initial'}}>\r\n                <MainHeaderContainer>\r\n                    <IconButton\r\n                        sx={{display: {xs: 'block', sm: 'block', md: 'none', xl: 'none'}}}\r\n                        size=\"large\"\r\n                        edge=\"start\"\r\n                        color=\"inherit\"\r\n                        aria-label=\"open drawer\"\r\n                        onClick={toggleDrawer(true)}\r\n                    >\r\n                        <MenuIcon/>\r\n                        <Drawer\r\n                            anchor={\"left\"}\r\n                            open={state}\r\n                            onClose={toggleDrawer(false)}\r\n                        >\r\n                            {list('left')}\r\n                        </Drawer>\r\n                    </IconButton>\r\n                    <Typography\r\n                        variant=\"h6\"\r\n                        noWrap\r\n                        component=\"div\"\r\n                        sx={{display: {xs: 'none', sm: 'block'}}}\r\n                    >\r\n                        Social Network\r\n                    </Typography>\r\n                    <Box sx={{flexGrow: 1}}/>\r\n                    {/*right header button*/}\r\n                    {props.isAuth ?\r\n                        <Box sx={{display: {xs: 'none', md: 'flex'}}}>\r\n                            <IconButton size=\"large\" aria-label=\"show 4 new mails\" color=\"inherit\">\r\n                                <Badge badgeContent={4} color=\"error\">\r\n                                    <MailIcon/>\r\n                                </Badge>\r\n                            </IconButton>\r\n                            <IconButton\r\n                                size=\"large\"\r\n                                aria-label=\"show 17 new notifications\"\r\n                                color=\"inherit\"\r\n                            >\r\n                                <Badge badgeContent={17} color=\"error\">\r\n                                    <NotificationsIcon/>\r\n                                </Badge>\r\n                            </IconButton>\r\n                            <IconButton\r\n                                size=\"large\"\r\n                                edge=\"end\"\r\n                                aria-controls={menuId}\r\n                                onClick={handleProfileMenuOpen}\r\n                                color=\"inherit\"\r\n                            >\r\n                                <Typography variant={\"body2\"}>\r\n                                    {props.login}\r\n                                </Typography>\r\n                                <AccountCircle/>\r\n                            </IconButton>\r\n\r\n                        </Box>\r\n                        : <NavLink to={'/login'} className={classes.navLink}>\r\n                            <Button variant={\"text\"}\r\n                                    color={\"primary\"}\r\n                                    size={\"large\"}>\r\n                                Login\r\n                            </Button>\r\n                        </NavLink>}\r\n                    <Box sx={{display: {xs: 'flex', md: 'none'}}}>\r\n                        <IconButton\r\n                            size=\"large\"\r\n                            aria-label=\"show more\"\r\n                            aria-controls={mobileMenuId}\r\n                            aria-haspopup=\"true\"\r\n                            onClick={handleMobileMenuOpen}\r\n                            color=\"inherit\"\r\n                        >\r\n                            <MoreIcon/>\r\n                        </IconButton>\r\n                    </Box>\r\n                </MainHeaderContainer>\r\n            </AppBar>\r\n            {renderMobileMenu}\r\n            {renderMenu}\r\n        </Box>\r\n    );\r\n}\r\n","import {Dispatch} from \"redux\";\r\nimport {authAPI,} from \"../API/api\";\r\nimport {stopSubmit} from \"redux-form\";\r\nimport {getUserProfile} from \"./profile-reducer\";\r\n\r\nconst SET_USER_DATA = \"social-network/auth/SET-USER-DATA\"\r\n\r\ntype AuthType = {\r\n    id: null | number\r\n    email: null | string,\r\n    login: null | string,\r\n    isAuth: boolean\r\n}\r\n\r\nexport type  InitialStateType = typeof initialState\r\nconst initialState = {\r\n    id: null,\r\n    email: null,\r\n    login: null,\r\n    isAuth: false\r\n} as AuthType\r\n\r\nexport const authReducer = (state: InitialStateType = initialState, action: ActionsType) => {\r\n    switch (action.type) {\r\n        case \"social-network/auth/SET-USER-DATA\":\r\n            return {...state, ...action.data}\r\n        default :\r\n            return state\r\n    }\r\n}\r\n\r\nexport type ActionsType = setAuthUserDataActionType\r\n\r\nexport type setAuthUserDataActionType = ReturnType<typeof setAuthUserData>\r\nexport const setAuthUserData = (id: number | null, email: string | null, login: string | null, isAuth: boolean) => {\r\n    return {\r\n        type: SET_USER_DATA,\r\n        data: {id, email, login, isAuth}\r\n    } as const\r\n}\r\n\r\n\r\n//thunk\r\nexport const getAuthUserData = () => async (dispatch: Dispatch<any>) => {\r\n    let response = await authAPI.me()\r\n    let {id, login, email} = response.data\r\n    if (response.resultCode === 0) {\r\n        dispatch(setAuthUserData(id, email, login, true))\r\n    }\r\n\r\n}\r\n\r\n\r\nexport const login = (email: string, password: string, rememberMe: boolean) => async (dispatch: Dispatch) => {\r\n    let response = await authAPI.login(email, password, rememberMe)\r\n    if (response.data.resultCode === 0) {\r\n        //todo\r\n        dispatch(getAuthUserData() as any)\r\n    } else {\r\n        dispatch(stopSubmit('login', {_error: response.data.messages}))\r\n    }\r\n\r\n}\r\n\r\n\r\nexport const logout = () => async (dispatch: Dispatch) => {\r\n    let response = await authAPI.logout()\r\n    if (response.data.resultCode === 0) {\r\n        dispatch(setAuthUserData(null, null, null, false))\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import * as React from 'react';\r\nimport Header from \"./Header\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppStateType} from \"../../redux/redux-store\";\r\nimport {getAuthUserData, logout} from \"../../redux/auth-reducer\";\r\n\r\ntype mapStateToPropsType = {\r\n    isAuth: boolean\r\n    login: string | null\r\n}\r\ntype mapDispatchPropsType = {\r\n    getAuthUserData: () => void\r\n    logout: () => void\r\n}\r\nexport type  HeaderPropsType = mapStateToPropsType & mapDispatchPropsType\r\n\r\nclass HeaderContainer extends React.Component<HeaderPropsType> {\r\n\r\n    render() {\r\n        return <Header {...this.props}/>\r\n    }\r\n}\r\n\r\n\r\n\r\nconst mapStateToProps = (state: AppStateType): mapStateToPropsType => {\r\n    return {\r\n        isAuth: state.auth.isAuth,\r\n        login: state.auth.login\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, {getAuthUserData, logout})(HeaderContainer);","import * as React from 'react';\r\nimport {\r\n    Button,\r\n    Checkbox, Chip,\r\n    FormControlLabel,\r\n    Grid,\r\n    Paper,\r\n    styled,\r\n    TextField,\r\n    Typography\r\n} from \"@mui/material\";\r\nimport {InjectedFormProps, reduxForm, Field} from \"redux-form\";\r\nimport {requiredField} from \"../../utils/validators/validators\";\r\nimport {connect, useSelector} from \"react-redux\";\r\nimport {login} from \"../../redux/auth-reducer\";\r\nimport {Redirect} from \"react-router-dom\";\r\nimport {AppStateType} from \"../../redux/redux-store\";\r\nimport ErrorOutlineIcon from '@mui/icons-material/ErrorOutline';\r\n\r\n\r\n\r\ntype FormDataType = {\r\n    login: string\r\n    password: string\r\n    rememberMe: boolean\r\n}\r\n\r\n//@ts-ignore\r\nconst renderTextField = ({label, input, meta: {touched, invalid, error}, ...custom}) => (\r\n    <TextField\r\n        label={label}\r\n        error={touched && invalid}\r\n        helperText={touched && error}\r\n        fullWidth\r\n        variant=\"outlined\"\r\n        {...input}\r\n        {...custom}\r\n    />\r\n)\r\n\r\n//@ts-ignore\r\nconst renderCheckbox = ({input, label}) => (\r\n    <FormControlLabel\r\n        control={\r\n            <Checkbox\r\n                checked={!!input.value}\r\n                onChange={input.onChange}\r\n            />\r\n        }\r\n        label={label}\r\n    />\r\n)\r\n\r\n\r\nconst LoginForm: React.FC<InjectedFormProps<FormDataType>> = ({handleSubmit, error}) => {\r\n\r\n    return (\r\n        <form onSubmit={handleSubmit}>\r\n            <Field name={'login'}\r\n                   label=\"Email\"\r\n                   component={renderTextField}\r\n                   validate={[requiredField]}\r\n            />\r\n            <Field name={'password'}\r\n                   type={\"password\"}\r\n                   label=\"Password\"\r\n                   component={renderTextField}\r\n                   validate={[requiredField]}\r\n            />\r\n            <Grid item flexWrap={'wrap'}>\r\n                <Field name={'rememberMe'} label='Remember me' component={renderCheckbox}/>\r\n                <Button variant={\"contained\"} type={\"submit\"} color={\"primary\"}>Sign in</Button>\r\n            </Grid>\r\n            {error && <Chip color={\"error\"} icon={<ErrorOutlineIcon/>} label={error}\r\n                   style={{margin: 'auto', marginTop: '20px', width: '100%'}}/>\r\n            }\r\n        </form>\r\n    );\r\n}\r\n\r\nconst LoginReduxForm = reduxForm<FormDataType>({form: 'login'})(LoginForm)\r\n\r\n\r\ntype loginPropsType = {\r\n    login: (email: string, password: string, rememberMe: boolean) => void\r\n}\r\n\r\nconst Login = (props: loginPropsType) => {\r\n\r\n    const isAuth = useSelector<AppStateType, boolean>(state => state.auth.isAuth)\r\n\r\n    const onSubmit = (formData: FormDataType) => {\r\n        props.login(formData.login, formData.password, formData.rememberMe)\r\n\r\n    }\r\n\r\n    if(isAuth) {\r\n        return <Redirect to={'/profile'}/>\r\n    }\r\n\r\n    return (\r\n        <RootContentContainer>\r\n            <LogInInfoContainer elevation={4}>\r\n                <Typography fontWeight={\"bold\"} variant={'h5'}>Hi my friend. I'm glad you decided to try my social\r\n                    network. Hope you like it <span>&#128521;</span></Typography>\r\n                <Typography variant={'subtitle2'}>Here's your default email and password so you can try it\r\n                    online</Typography>\r\n                <ul>\r\n                    <li>free@samuraijs.com</li>\r\n                    <li>free</li>\r\n                </ul>\r\n            </LogInInfoContainer>\r\n            <LogInFormContainer elevation={4}>\r\n                <LoginReduxForm onSubmit={onSubmit}/>\r\n            </LogInFormContainer>\r\n        </RootContentContainer>\r\n    );\r\n}\r\n\r\nexport default connect(null, {login})(Login);\r\n\r\nconst RootContentContainer = styled(Paper)`\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-around;\r\n  width: 100%;\r\n  margin: 50px auto;\r\n  padding: 50px;\r\n\r\n  @media (max-width: 768px) {\r\n    flex-direction: column;\r\n    width: 100%;\r\n    padding: 10px;\r\n  }\r\n`\r\nconst LogInInfoContainer = styled(Paper)`\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 50%;\r\n  padding: 20px;\r\n\r\n  .MuiTypography-subtitle2 {\r\n    margin-top: 20px;\r\n  }\r\n\r\n  @media (max-width: 768px) {\r\n    width: 100%;\r\n    margin-bottom: 20px;\r\n  }\r\n`\r\nconst LogInFormContainer = styled(Paper)`\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 30%;\r\n  padding: 20px;\r\n\r\n  .MuiTextField-root {\r\n    margin-bottom: 20px;\r\n  }\r\n\r\n  .MuiGrid-item {\r\n    display: flex;\r\n    flex-direction: row;\r\n    justify-content: space-between;\r\n  }\r\n\r\n  @media (max-width: 768px) {\r\n    width: 100%;\r\n  }\r\n`\r\n","import {Dispatch} from \"redux\";\r\nimport {getAuthUserData} from \"./auth-reducer\";\r\n\r\nconst INITIALIZED_SUCCESS = \"INITIALIZED_INITIALIZED_SUCCESS\"\r\n\r\nexport type  InitialStateType = typeof initialState\r\nconst initialState = {\r\n    initialized: false\r\n}\r\n\r\nexport const appReducer = (state: InitialStateType = initialState, action: ActionsType) => {\r\n    switch (action.type) {\r\n        case \"INITIALIZED_INITIALIZED_SUCCESS\":\r\n            return {...state, initialized: true}\r\n        default :\r\n            return state\r\n    }\r\n}\r\n\r\nexport type ActionsType =  followActionType\r\n\r\nexport type followActionType = ReturnType<typeof initializedSuccess>\r\nexport const initializedSuccess = () => {\r\n    return {\r\n        type: INITIALIZED_SUCCESS\r\n    } as const\r\n}\r\n\r\n\r\n//thunk\r\nexport const initializeApp = () => async (dispatch: Dispatch<any>) => {\r\n    let promise = dispatch(getAuthUserData())\r\n    await Promise.all([promise])\r\n    dispatch(initializedSuccess())\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n","import React from \"react\";\r\n\r\n\r\nexport function withSuspense<WCP>(WrappedComponent: React.ComponentType<WCP>) {\r\n    return (props: WCP) => {\r\n        return (\r\n            <React.Suspense fallback={<div>loading...</div>}>\r\n                <WrappedComponent {...props} />\r\n            </React.Suspense>\r\n        )\r\n    }\r\n}","import React, {useEffect, useState} from 'react';\nimport {\n    createTheme,\n    CssBaseline, Grid, IconButton,\n    PaletteOptions,\n    styled,\n    ThemeProvider, Tooltip,\n} from \"@mui/material\";\nimport {Redirect, Route, Switch} from \"react-router-dom\";\nimport NavBar from \"./components/NavBar/NavBar\";\nimport Music from \"./components/ComingSoon/Music/Music\";\nimport News from \"./components/ComingSoon/News/News\";\nimport Settings from \"./components/ComingSoon/Settings/Settings\";\nimport RightDialogMenu from \"./components/Dialogs/RightDialogMenu/RightDialogMenu\";\nimport Communities from \"./components/ComingSoon/Communities/Communities\";\nimport Photos from \"./components/ComingSoon/Photos/Photos\";\nimport Videos from \"./components/ComingSoon/Videos/Videos\";\nimport ChatContainer from \"./components/Dialogs/ChatContainer\";\nimport useClasses from \"./customHookCSS/useClasses\";\nimport LightModeIcon from '@mui/icons-material/LightMode';\nimport DarkModeIcon from '@mui/icons-material/DarkMode';\nimport HeaderContainer from \"./components/Header/HeaderContainer\";\nimport Login from \"./components/Login/Login\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {AppStateType} from \"./redux/redux-store\";\nimport {initializeApp} from \"./redux/app-reducer\";\nimport Preloader from \"./common/Preloader/Preloader\";\nimport {withSuspense} from \"./hoc/WithSuspense\";\n\n\nconst DialogsContainer = React.lazy(() => import('./components/Dialogs/DialogsContainer'));\nconst ProfileContainer = React.lazy(() => import('./components/Profile/ProfileContainer'));\nconst UsersContainer = React.lazy(() => import('./components/Users/UsersContainer'));\nconst Chat = React.lazy(() => import('./components/Chat/Chat'));\n\nconst lightTheme = createTheme({\n    palette: {\n        mode: 'light',\n        primary: {\n            main: '#90caf9',\n        },\n        secondary: {\n            main: '#f50057',\n        },\n    },\n});\nconst darkTheme = createTheme({\n    palette: {\n        mode: 'dark',\n        primary: {\n            main: '#3f51b5',\n        },\n        secondary: {\n            main: '#f50057',\n        },\n    } as PaletteOptions,\n});\n\n\nconst MainContentContainer = styled('div')(({theme}) => ({\n    flexGrow: 1,\n    margin: 'auto',\n    width: '70%',\n    marginTop: '20px',\n    marginBottom: '20px',\n    [theme.breakpoints.down('md')]: {\n        width: '90%',\n    },\n    [theme.breakpoints.up('md')]: {\n        width: '90%',\n    },\n    [theme.breakpoints.up('lg')]: {\n        width: '80%',\n    },\n}));\n\nconst styles = (theme: any) => ({\n    rootContainer: {\n        gap: 16,\n        [theme.breakpoints.between('xs', \"md\")]: {\n            display: 'flex',\n            flexDirection: 'column',\n            flexWrap: 'wrap',\n            justifyContent: 'center',\n            width: '100%',\n            alignItems: 'center',\n        },\n        [theme.breakpoints.between('md', \"lg\")]: {\n            display: 'flex',\n            flexDirection: 'row',\n            flexWrap: 'nowrap',\n        },\n        [theme.breakpoints.up('lg')]: {\n            display: 'flex',\n            direction: 'row',\n            flexWrap: 'nowrap',\n        },\n\n    },\n    navigationContainer: {\n        [theme.breakpoints.between('xs', \"md\")]: {\n            display: 'none'\n        },\n        [theme.breakpoints.only('md')]: {\n            display: 'flex',\n            width: '60px',\n            overflow: 'hidden',\n        }\n    },\n\n\n});\n\n\nconst SuspendedDialogs = withSuspense(DialogsContainer)\nconst SuspendedProfile = withSuspense(ProfileContainer)\nconst SuspendedUsers = withSuspense(UsersContainer)\nconst SuspendedChat = withSuspense(Chat)\n\n\nfunction App() {\n    console.log('app')\n    const classes = useClasses(styles);\n    const dispatch = useDispatch()\n\n    const [isDarkMode, setDarkMode] = useState(true)\n\n    const toggleThemeMode = () => {\n        setDarkMode(!isDarkMode)\n    }\n\n    const isAuth = useSelector<AppStateType, boolean>(state => state.auth.isAuth)\n    const initialized = useSelector<AppStateType, boolean>(state => state.app.initialized)\n\n\n    useEffect(() => {\n        dispatch(initializeApp())\n    }, [])\n\n    if (!initialized) {\n        return <Preloader/>\n    }\n\n    return (\n        <ThemeProvider theme={isDarkMode ? darkTheme : lightTheme}>\n            <CssBaseline/>\n            <div className=\"App\">\n                <HeaderContainer/>\n                <MainContentContainer>\n                    <Grid item className={classes.rootContainer}>\n                        {isAuth && <Grid item className={classes.navigationContainer}>\n                            <Grid item>\n                                <NavBar/>\n                            </Grid>\n                        </Grid>}\n                        <Switch>\n                            <Route exact path=\"/\">\n                                <Redirect to=\"/profile\"/>\n                            </Route>\n                            <Route path='/profile/:userId?' render={() => <SuspendedProfile/>}/>\n                            <Route exact path='/dialogs' render={() =>\n                                <Grid container item spacing={2} flexDirection={\"row\"} flexWrap={\"nowrap\"}>\n                                    <SuspendedDialogs/>\n                                    <RightDialogMenu/>\n                                </Grid>\n                            }/>\n                            <Route path='/dialogs/:id' render={() =>\n                                <Grid container item spacing={2} flexDirection={\"row\"} flexWrap={\"nowrap\"}>\n                                    <ChatContainer/>\n                                    <RightDialogMenu/>\n                                </Grid>\n                            }/>\n                            <Route path='/users' render={() => <SuspendedUsers/>}/>\n                            <Route path='/news' render={() => <News/>}/>\n                            <Route path='/music' render={() => <Music/>}/>\n                            <Route path='/communities' render={() => <Communities/>}/>\n                            <Route path='/photos' render={() => <Photos/>}/>\n                            <Route path='/videos' render={() => <Videos/>}/>\n                            <Route path='/settings' render={() => <Settings/>}/>\n                            <Route path='/login' render={() => <Login/>}/>\n                            <Route path='/chat' render={() => <SuspendedChat/>}/>\n\n                        </Switch>\n                    </Grid>\n                </MainContentContainer>\n                <ModeButton aria-label=\"Switcher Mode\" size={\"large\"} onClick={toggleThemeMode}>\n                    {isDarkMode\n                        ? <Tooltip title=\"Switch to light\"><LightModeIcon color={\"warning\"}/></Tooltip>\n                        : <Tooltip title=\"Switch to dark\"><DarkModeIcon/></Tooltip>}\n                </ModeButton>\n            </div>\n        </ThemeProvider>\n\n    );\n}\n\nexport default App\n\nconst ModeButton = styled(IconButton)`\n  position: sticky;\n  bottom: 0;\n  left: 97%;\n`","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import {createStore, combineReducers, applyMiddleware, Action} from 'redux'\r\nimport {profileReducer} from \"./profile-reducer\";\r\nimport {dialogsReducer} from \"./dialogs-reducer\";\r\nimport {usersReducer} from \"./users-reducer\";\r\nimport {authReducer} from \"./auth-reducer\";\r\nimport thunkMiddleWare, { ThunkAction } from 'redux-thunk'\r\nimport { reducer as formReducer } from 'redux-form'\r\nimport {appReducer} from \"./app-reducer\";\r\nimport chatReducer from \"./chat-reducer\";\r\n\r\n\r\n\r\nlet rootReducers = combineReducers({\r\n    profilePage: profileReducer,\r\n    dialogPage: dialogsReducer,\r\n    usersPage:usersReducer,\r\n    auth: authReducer,\r\n    form: formReducer,\r\n    app: appReducer,\r\n    chat: chatReducer\r\n})\r\n\r\n\r\n// @ts-ignore\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose\r\n\r\n\r\nexport type AppStateType = ReturnType<typeof rootReducers>\r\nexport type storeType = typeof store\r\nconst store = createStore(rootReducers, composeEnhancers(applyMiddleware(thunkMiddleWare)))\r\n\r\nexport type InferActionsTypes<T> = T extends { [keys: string]: (...args: any[]) => infer U } ? U : never\r\n\r\nexport type BaseThunkType<A extends Action = Action, R = Promise<void>> = ThunkAction<R, AppStateType, unknown, A>\r\n\r\nexport default store\r\n\r\n// @ts-ignore\r\nwindow.store = store;\r\n\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport {BrowserRouter} from \"react-router-dom\";\nimport {Provider} from 'react-redux';\nimport store from './redux/redux-store'\nimport axios from \"axios\";\n\naxios.defaults.headers.common [\"API-KEY\"] = \"cf750a83-7c21-4e27-915c-0dade0a73893\"\n\nReactDOM.render(\n    <React.StrictMode>\n        <BrowserRouter>\n            <Provider store={store}>\n                <App/>\n            </Provider>\n        </BrowserRouter>\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","import axios from \"axios\";\r\nimport {\r\n    AuthResponseAPIType,\r\n    FollowUnfollowResponseAPIType, ProfileResponseAPIType,\r\n    UsersResponseAPIType\r\n} from \"../APIResponseType/ApiResponseTypes\";\r\n\r\n\r\n\r\nconst instance = axios.create({\r\n    withCredentials: true,\r\n    headers:{\r\n        \"API-KEY\" : \"cf750a83-7c21-4e27-915c-0dade0a73893\"\r\n    },\r\n    baseURL: 'https://social-network.samuraijs.com/api/1.0/'\r\n})\r\n\r\nexport const usersAPI = {\r\n    getUsers: (currentPage: number, pageSize: number, isFriends: boolean) => {\r\n        return instance.get<UsersResponseAPIType>(`users?page=${currentPage}&count=${pageSize}&friend=${isFriends}`)\r\n            .then(response => response.data)\r\n    },\r\n    follow: (id: number) => {\r\n        return instance.post<FollowUnfollowResponseAPIType>(`follow/${id}`)\r\n    },\r\n    unfollow: (id: number) => {\r\n        return instance.delete<FollowUnfollowResponseAPIType>(`follow/${id}`)\r\n    },\r\n}\r\n\r\nexport const profileAPI = {\r\n    getProfile: (userId: string) => {\r\n        return instance.get<ProfileResponseAPIType>(`profile/${userId}`)\r\n            .then(response => response.data)\r\n    },\r\n    getStatus: (userId: string) => {\r\n        //todo type\r\n        return instance.get<any>(`profile/status/${userId}`)\r\n            .then(response => response.data)\r\n    },\r\n    updateStatus: (status: string) => {\r\n        //todo type\r\n        return instance.put<any>(`profile/status`, {status})\r\n            .then(response => response.data)\r\n    }\r\n}\r\n\r\n\r\nexport const authAPI = {\r\n    me: () => {\r\n        return instance.get<AuthResponseAPIType>('auth/me')\r\n            .then(response => response.data)\r\n    },\r\n    login: (email: string, password: string, rememberMe: boolean = false) => {\r\n        return instance.post<any>('auth/login', {email, password, rememberMe})\r\n    },\r\n    logout: () => {\r\n        return instance.delete<any>('auth/login')\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n","import { useMemo } from 'react';\r\nimport { css } from '@emotion/css';\r\nimport {useTheme} from \"@mui/material\";\r\n\r\nconst useClasses = (stylesElement: any) => {\r\n    const theme = useTheme();\r\n    return useMemo(() => {\r\n        const rawClasses = typeof stylesElement === 'function'\r\n            ? stylesElement(theme)\r\n            : stylesElement;\r\n        const prepared:any = {};\r\n\r\n        Object.entries(rawClasses).forEach(([key, value = {}]) => {\r\n            // @ts-ignore\r\n            prepared[key] = css(value);\r\n        });\r\n\r\n        return prepared;\r\n    }, [stylesElement, theme]);\r\n};\r\n\r\nexport default useClasses;","import {v1} from \"uuid\";\r\n\r\nconst SEND_MESSAGE = \"SEND-MESSAGE\"\r\nconst DELETE_DIALOG = \"DELETE-DIALOG\"\r\nconst DELETE_MESSAGES = \"DELETE-MESSAGES\"\r\nconst EDIT_MESSAGES = \"EDIT-MESSAGES\"\r\n\r\nexport type MessageType = {\r\n    id: string\r\n    message: string\r\n    isEdit: boolean\r\n}\r\nexport type DialogType = {\r\n    id: string\r\n    name: string\r\n}\r\n\r\nexport type DialogPageType = {\r\n    dialogs: Array<DialogType>\r\n    messages: Array<MessageType>\r\n}\r\n\r\nexport type InitialStateType = typeof initialState\r\n\r\nconst initialState: DialogPageType = {\r\n    dialogs: [\r\n        {id: v1(), name: 'Alex'},\r\n        {id: v1(), name: 'John'},\r\n        {id: v1(), name: 'Matthew'},\r\n        {id: v1(), name: 'Noah'},\r\n        {id: v1(), name: 'Liam'},\r\n        {id: v1(), name: 'Mason'},\r\n        {id: v1(), name: 'Jacob'},\r\n        {id: v1(), name: 'William'},\r\n        {id: v1(), name: 'Ethan'},\r\n        {id: v1(), name: 'Michael'},\r\n        {id: v1(), name: 'Daniel'},\r\n        {id: v1(), name: 'Thomas'},\r\n    ] as Array<DialogType>,\r\n    messages: [\r\n        {id: v1(), message: 'hi', isEdit:false},\r\n        {id: v1(), message: 'how is your it-kamasutra', isEdit:false},\r\n        {id: v1(), message: 'yo', isEdit:false},\r\n        {id: v1(), message: 'yo', isEdit:false},\r\n        {\r\n            id: v1(),\r\n            message: 'Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ea illum, molestias quibusdam rem repellat sapiente? ' +\r\n                'Amet consequatur corporis cum, et ipsam magni, nemo obcaecati quos saepe, sed sint tempora totam!',\r\n            isEdit:false\r\n        },\r\n    ] as Array<MessageType>\r\n}\r\n\r\nexport const dialogsReducer = (state: InitialStateType = initialState, action: ActionsType) : InitialStateType => {\r\n    switch (action.type) {\r\n        case \"SEND-MESSAGE\": {\r\n            let newMess = {\r\n                id: v1(),\r\n                message: action.newMessText,\r\n                isEdit:false\r\n            }\r\n            return {...state, messages:[...state.messages, newMess]}\r\n        }\r\n        case \"DELETE-DIALOG\":{\r\n            return {...state, dialogs:[...state.dialogs.filter(d => d.id !== action.dialogID)]}\r\n        }\r\n        case \"DELETE-MESSAGES\":{\r\n            return {...state, messages: [...state.messages.filter(m => !action.selectedMessages.includes(m.id))]}\r\n        }\r\n        case \"EDIT-MESSAGES\":{\r\n            return {...state, messages: state.messages.map(m => m.id === action.messID\r\n                    ? {...m, message: action.newMessText, isEdit: !m.isEdit}\r\n                    : m)}\r\n        }\r\n        default :\r\n            return state\r\n    }\r\n}\r\n\r\ntype ActionsType =  SendMessageActionType | DeleteMessagesActionType |  DeleteDialogActionType | EditMessageActionType\r\n\r\nexport type SendMessageActionType = ReturnType<typeof sendMessageCreator>\r\nexport const sendMessageCreator = (newMessText: string)=> {\r\n    return {\r\n        type: SEND_MESSAGE,\r\n        newMessText\r\n    } as const\r\n}\r\n\r\nexport type DeleteMessagesActionType = ReturnType<typeof DeleteMessagesCreator>\r\nexport const DeleteMessagesCreator= (selectedMessages: string[]) => {\r\n    return {\r\n        type: DELETE_MESSAGES,\r\n        selectedMessages\r\n    } as const\r\n}\r\n\r\n\r\nexport type DeleteDialogActionType = ReturnType<typeof DeleteDialogCreator>\r\nexport const DeleteDialogCreator= (dialogID: string) => {\r\n    return {\r\n        type: DELETE_DIALOG,\r\n        dialogID: dialogID\r\n    } as const\r\n}\r\n\r\nexport type EditMessageActionType = ReturnType<typeof EditMessageAC>\r\nexport const EditMessageAC= (messID: string, newMessText: string) => {\r\n    return {\r\n        type: EDIT_MESSAGES,\r\n        messID, newMessText\r\n    } as const\r\n}","export const requiredField = (value: any) => {\r\n    if(value) return undefined\r\n    return 'Field is required'\r\n}\r\n\r\n\r\nexport const maxLengthCreator = (maxLength: number) => (value: any) => {\r\n    if(value.length > maxLength) return `Max length is ${maxLength} symbols`\r\n    return undefined\r\n}\r\n","import {v1} from \"uuid\";\r\nimport {PhotosType, toggleIsFetching} from \"./users-reducer\";\r\nimport {Dispatch} from \"redux\";\r\nimport {profileAPI} from \"../API/api\";\r\n\r\nconst ADD_POST = \"ADD-POST\"\r\nconst DELETE_POST = \"DELETE-POST\"\r\nconst SET_USER_PROFILE = \"SET-USER-PROFILE\"\r\nconst SET_STATUS = \"SET-STATUS\"\r\nconst SET_LIKE = \"SET-LIKE\"\r\nconst SET_DISLIKE = \"SET-DISLIKE\"\r\n\r\nexport type PostType = {\r\n    id: string\r\n    message: string\r\n    likeCount: number\r\n    isLiked: boolean\r\n}\r\nexport type ContactsType = {\r\n    vk: string\r\n    facebook: string\r\n    instagram: string\r\n    twitter: string\r\n    website: string\r\n    youtube: string\r\n    mainLink: string\r\n    github: string\r\n}\r\nexport type ProfileType = {\r\n    aboutMe: string\r\n    contacts: ContactsType\r\n    lookingForAJob: boolean\r\n    lookingForAJobDescription: string\r\n    fullName: string\r\n    userId: number | null\r\n    photos: PhotosType\r\n}\r\nexport type ProfilePageType = {\r\n    posts: Array<PostType>\r\n    profile: ProfileType\r\n    status: string\r\n}\r\n\r\nexport type InitialStateType = typeof initialState\r\nconst initialState: ProfilePageType = {\r\n    posts: [\r\n        {id: v1(), message: 'Hi, how are you ', likeCount: 15, isLiked: false},\r\n        {id: v1(), message: 'It\\'s my first post ', likeCount: 20, isLiked: true},\r\n        {\r\n            id: v1(),\r\n            message: 'Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ea illum, molestias quibusdam rem repellat sapiente? Amet consequatur corporis cum, et ipsam magni, nemo obcaecati quos saepe, sed sint tempora totam',\r\n            likeCount: 5,\r\n            isLiked: false\r\n        },\r\n        {id: v1(), message: 'Da da ', likeCount: 99, isLiked: true},\r\n    ] as PostType[],\r\n    profile: {\r\n        aboutMe: '',\r\n        contacts: {\r\n            facebook: '',\r\n            website: '',\r\n            vk: '',\r\n            twitter: '',\r\n            instagram: '',\r\n            youtube: '',\r\n            github: '',\r\n            mainLink: ''\r\n        },\r\n        lookingForAJob: false,\r\n        lookingForAJobDescription: '',\r\n        fullName: '',\r\n        userId: null,\r\n        photos: {\r\n            large: null,\r\n            small: null\r\n        }\r\n    } as ProfileType,\r\n    status: ''\r\n}\r\n\r\n\r\nexport const profileReducer = (state: InitialStateType = initialState, action: ActionsType): InitialStateType => {\r\n    switch (action.type) {\r\n        case \"ADD-POST\": {\r\n            let newPost = {\r\n                id: v1(),\r\n                message: action.newPostText,\r\n                likeCount: 0,\r\n                isLiked: false\r\n            }\r\n            return {...state, posts: [newPost, ...state.posts]}\r\n        }\r\n        case \"DELETE-POST\": {\r\n            return {...state, posts: [...state.posts.filter(p => p.id !== action.postID)]}\r\n        }\r\n        case \"SET-USER-PROFILE\": {\r\n            return {...state, profile: action.profile}\r\n        }\r\n        case \"SET-STATUS\": {\r\n            return {...state, status: action.status}\r\n        }\r\n        case \"SET-LIKE\": {\r\n            return {\r\n                ...state, posts: state.posts.map(p => p.id === action.postID\r\n                    ? {...p, likeCount: p.likeCount + 1, isLiked: true} : p)\r\n            }\r\n        }\r\n        case \"SET-DISLIKE\":\r\n            return {\r\n                ...state, posts: state.posts.map(p => p.id === action.postID\r\n                    ? {...p, likeCount: p.likeCount - 1, isLiked: false} : p)\r\n            }\r\n        default :\r\n            return state\r\n    }\r\n\r\n}\r\n\r\ntype ActionsType = AddPostActionType\r\n    | DeletePostActionType\r\n    | setUserProfileActionType\r\n    | setUserStatusActionType\r\n    | setLikeActionType\r\n    | setDislikeActionType\r\n\r\nexport type AddPostActionType = ReturnType<typeof addPostActionCreator>\r\nexport const addPostActionCreator = (newPostText: string) => {\r\n    return {\r\n        type: ADD_POST,\r\n        newPostText\r\n    } as const\r\n}\r\n\r\nexport type DeletePostActionType = ReturnType<typeof DeletePostCreator>\r\nexport const DeletePostCreator = (postID: string) => {\r\n    return {\r\n        type: DELETE_POST,\r\n        postID: postID\r\n    } as const\r\n}\r\n\r\nexport type setUserProfileActionType = ReturnType<typeof setUserProfile>\r\nexport const setUserProfile = (profile: ProfileType) => {\r\n    return {\r\n        type: SET_USER_PROFILE,\r\n        profile\r\n    } as const\r\n}\r\n\r\nexport type setUserStatusActionType = ReturnType<typeof setStatus>\r\nexport const setStatus = (status: string) => {\r\n    return {\r\n        type: SET_STATUS,\r\n        status\r\n    } as const\r\n}\r\n\r\nexport type setLikeActionType = ReturnType<typeof setLike>\r\nexport const setLike = (postID: string) => {\r\n    return {\r\n        type: SET_LIKE,\r\n        postID\r\n    } as const\r\n}\r\n\r\nexport type setDislikeActionType = ReturnType<typeof setDislike>\r\nexport const setDislike = (postID: string) => {\r\n    return {\r\n        type: SET_DISLIKE,\r\n        postID\r\n    } as const\r\n}\r\n\r\n\r\n//thunk\r\nexport const getUserProfile = (userId: string) => async (dispatch: Dispatch) => {\r\n    dispatch(toggleIsFetching(true))\r\n    let response = await profileAPI.getProfile(userId)\r\n    dispatch(setUserProfile(response))\r\n}\r\n\r\n\r\nexport const getStatus = (userId: string) => async (dispatch: Dispatch) => {\r\n    let response = await profileAPI.getStatus(userId)\r\n    dispatch(setStatus(response))\r\n}\r\n\r\n\r\nexport const updateStatus = (status: string) => async (dispatch: Dispatch) => {\r\n    let response = await profileAPI.updateStatus(status)\r\n    if (response.resultCode === 0) {\r\n        dispatch(setStatus(status))\r\n    }\r\n}\r\n"],"sourceRoot":""}